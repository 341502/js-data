{"version":3,"file":"js-data.js","sources":["../src/utils.js","../src/query.js","../lib/mindex/utils.js","../lib/mindex/index.js","../src/collection.js","../src/decorators/belongsTo.js","../src/decorators/configure.js","../src/decorators/hasMany.js","../src/decorators/hasOne.js","../src/decorators/schema.js","../src/decorators/adapter.js","../src/record.js","../src/schema.js","../src/mapper.js","../src/container.js","../src/linkedcollection.js","../src/datastore.js","../src/index.js"],"sourcesContent":["/**\n * @module utils\n * @memberof module:js-data\n */\n\nconst INFINITY = 1 / 0\nconst MAX_INTEGER = 1.7976931348623157e+308\nconst ARRAY_TAG = '[object Array]'\nconst BOOL_TAG = '[object Boolean]'\nconst DATE_TAG = '[object Date]'\nconst FUNC_TAG = '[object Function]'\nconst NUMBER_TAG = '[object Number]'\nconst OBJECT_TAG = '[object Object]'\nconst REGEXP_TAG = '[object RegExp]'\nconst STRING_TAG = '[object String]'\nconst objToString = Object.prototype.toString\nlet isBrowser\n\n/**\n * Attempt to detect whether we are in the browser.\n */\ntry {\n  isBrowser = !!window\n} catch (e) {\n  isBrowser = false\n}\n\nexport {isBrowser}\n\nconst toString = function (value) {\n  return objToString.call(value)\n}\nconst toInteger = function (value) {\n  if (!value) {\n    return value === 0 ? value : 0\n  }\n  value = +value\n  if (value === INFINITY || value === -INFINITY) {\n    const sign = (value < 0 ? -1 : 1)\n    return sign * MAX_INTEGER\n  }\n  const remainder = value % 1\n  return value === value ? (remainder ? value - remainder : value) : 0\n}\n\n/**\n * Return whether the provided value is an array.\n * @method\n * @param {*} [value] - The value to test.\n */\nexport const isArray = Array.isArray\n/**\n * Return whether the provided value is an object type.\n * @param {*} [value] - The value to test.\n */\nexport function isObject (value) {\n  return toString(value) === OBJECT_TAG\n}\nfunction isPlainObject (value) {\n  return (!!value && typeof value === 'object' && value.constructor === Object)\n}\n/**\n * Return whether the provided value is a regular expression type.\n * @param {*} [value] - The value to test.\n */\nexport function isRegExp (value) {\n  return toString(value) === REGEXP_TAG\n}\n/**\n * Return whether the provided value is a string type.\n * @param {*} [value] - The value to test.\n */\nexport const isString = function (value) {\n  return typeof value === 'string' || (value && typeof value === 'object' && toString(value) === STRING_TAG)\n}\n/**\n * Return whether the provided value is null.\n * @param {*} [value] - The value to test.\n */\nexport const isNull = function (value) {\n  return value === null\n}\n/**\n * Return whether the provided value is undefined.\n * @param {*} [value] - The value to test.\n */\nexport const isUndefined = function (value) {\n  return value === undefined\n}\n/**\n * Return whether the provided value is a date type.\n * @param {*} [value] - The value to test.\n */\nexport const isDate = function (value) {\n  return (value && typeof value === 'object' && toString(value) === DATE_TAG)\n}\n/**\n * Return whether the provided value is a number type.\n * @param {*} [value] - The value to test.\n */\nexport const isNumber = function (value) {\n  const type = typeof value\n  return type === 'number' || (value && type === 'object' && toString(value) === NUMBER_TAG)\n}\n/**\n * Return whether the provided value is an integer.\n * @param {*} [value] - The value to test.\n */\nexport const isInteger = function (value) {\n  return toString(value) === NUMBER_TAG && value == toInteger(value)\n}\n/**\n * Return whether the provided value is a boolean type.\n * @param {*} [value] - The value to test.\n */\nexport function isBoolean (value) {\n  return toString(value) === BOOL_TAG\n}\n/**\n * Return whether the provided value is a function.\n * @param {*} [value] - The value to test.\n */\nexport function isFunction (value) {\n  return typeof value === 'function' || (value && toString(value) === FUNC_TAG)\n}\n/**\n * Return whether the provided value is a string or a number.\n * @param {*} [value] - The value to test.\n */\nexport function isSorN (value) {\n  return isString(value) || isNumber(value)\n}\n/**\n * Get the value at the provided key or path.\n * @param {Object} object - The object from which to retrieve a property.\n * @param {string} prop - The key or path to the property.\n */\nexport function get (object, prop) {\n  if (!prop) {\n    return\n  }\n  const parts = prop.split('.')\n  const last = parts.pop()\n\n  while (prop = parts.shift()) { // eslint-disable-line\n    object = object[prop]\n    if (object == null) return\n  }\n\n  return object[last]\n}\n/**\n * Unset the value at the provided key or path.\n * @param {Object} object - The object on which to unset a property.\n * @param {string} prop - The key or path to the property.\n */\nexport function unset (object, prop) {\n  const parts = prop.split('.')\n  const last = parts.pop()\n\n  while (prop = parts.shift()) { // eslint-disable-line\n    object = object[prop]\n    if (object == null) return\n  }\n\n  object[last] = undefined\n  delete object[last]\n}\nfunction mkdirP (object, path) {\n  if (!path) {\n    return object\n  }\n  const parts = path.split('.')\n  parts.forEach(function (key) {\n    if (!object[key]) {\n      object[key] = {}\n    }\n    object = object[key]\n  })\n  return object\n}\nconst PATH = /^(.+)\\.(.+)$/\n/**\n * Set the value at the provided key or path.\n * @param {Object} object - The object on which to set a property.\n * @param {(string|Object)} path - The key or path to the property. Can also\n * pass in an object of path/value pairs, which will all be set on the target\n * object.\n * @param {*} [value] - The value to set.\n */\nexport function set (object, path, value) {\n  if (isObject(path)) {\n    forOwn(path, function (value, _path) {\n      set(object, _path, value)\n    })\n  } else {\n    const parts = PATH.exec(path)\n    if (parts) {\n      mkdirP(object, parts[1])[parts[2]] = value\n    } else {\n      object[path] = value\n    }\n  }\n}\n/**\n * Iterate over an object's own enumerable properties.\n * @param {Object} object - The object whose properties are to be enumerated.\n * @param {Function} fn - Iteration function.\n * @param {Object} [thisArg] - Content to which to bind `fn`.\n */\nexport function forOwn (obj, fn, thisArg) {\n  const keys = Object.keys(obj)\n  const len = keys.length\n  let i\n  for (i = 0; i < len; i++) {\n    fn.call(thisArg, obj[keys[i]], keys[i], obj)\n  }\n}\n/**\n * Recursively shallow copy own enumberable properties from `source` to `dest`.\n * @param {Object} dest - The destination object.\n * @param {Object} source - The source object.\n */\nexport function deepMixIn (dest, source) {\n  if (source) {\n    forOwn(source, function (value, key) {\n      const existing = this[key]\n      if (isPlainObject(value) && isPlainObject(existing)) {\n        deepMixIn(existing, value)\n      } else {\n        this[key] = value\n      }\n    }, dest)\n  }\n  return dest\n}\n/**\n * Proxy for `Promise.resolve`.\n * @param {*} [value] - Value with which to resolve the Promise.\n * @return {Promise} Promise resolved with `value`.\n */\nexport function resolve (value) {\n  return Promise.resolve(value)\n}\n/**\n * Proxy for `Promise.reject`.\n * @param {*} [value] - Value with which to reject the Promise.\n * @return {Promise} Promise reject with `value`.\n */\nexport function reject (value) {\n  return Promise.reject(value)\n}\n/**\n * Shallow copy own enumerable non-function properties from `Model` to `opts`.\n * @param {Model} Model - The source Model.\n * @param {Object} opts - The target object.\n */\nexport function _ (Model, opts) {\n  for (var key in Model) {\n    let value = Model[key]\n    if (opts[key] === undefined && !isFunction(value) && key && key.indexOf('_') !== 0) {\n      opts[key] = value\n    }\n  }\n}\n/**\n * Return the intersection of two arrays.\n * @param {Array} array1 - First array.\n * @param {Array} array2 - Second array.\n * @return {Array} Array of elements common to both arrays.\n */\nexport function intersection (array1, array2) {\n  if (!array1 || !array2) {\n    return []\n  }\n  const result = []\n  let item\n  let i\n  const len = array1.length\n  for (i = 0; i < len; i++) {\n    item = array1[i]\n    if (result.indexOf(item) !== -1) {\n      continue\n    }\n    if (array2.indexOf(item) !== -1) {\n      result.push(item)\n    }\n  }\n  return result\n}\n/**\n * Shallow copy own enumerable properties from `src` to `dest` that are on `src`\n * but are missing from `dest.\n * @param {Object} dest - The destination object.\n * @param {Object} source - The source object.\n */\nexport function fillIn (dest, src) {\n  forOwn(src, function (value, key) {\n    if (!dest.hasOwnProperty(key) || dest[key] === undefined) {\n      dest[key] = value\n    }\n  })\n}\n/**\n * Return whether `prop` is matched by any string or regular expression in `bl`.\n * @param {string} prop - The name of a property.\n * @param {Array} bl - Array of strings and regular expressions.\n * @return {boolean} Whether `prop` was matched.\n */\nexport function isBlacklisted (prop, bl) {\n  if (!bl || !bl.length) {\n    return false\n  }\n  let matches\n  for (var i = 0; i < bl.length; i++) {\n    if ((toString(bl[i]) === '[object RegExp]' && bl[i].test(prop)) || bl[i] === prop) {\n      matches = prop\n      return matches\n    }\n  }\n  return !!matches\n}\n/**\n * Proxy for `JSON.parse`.\n * @param {string} json - JSON to parse.\n * @return {Object} Parsed object.\n */\nexport function fromJson (json) {\n  return isString(json) ? JSON.parse(json) : json\n}\n/**\n * Proxy for `JSON.stringify`.\n * @method\n * @param {*} value - Value to serialize to JSON.\n * @return {string} JSON string.\n */\nexport const toJson = JSON.stringify\n/**\n * Deep copy a value.\n * @param {*} from - Value to deep copy.\n * @return {*} Deep copy of `from`.\n */\nexport function copy (from, to, stackFrom, stackTo, blacklist) {\n  if (!to) {\n    to = from\n    if (from) {\n      if (isArray(from)) {\n        to = copy(from, [], stackFrom, stackTo, blacklist)\n      } else if (isDate(from)) {\n        to = new Date(from.getTime())\n      } else if (isRegExp(from)) {\n        to = new RegExp(from.source, from.toString().match(/[^\\/]*$/)[0])\n        to.lastIndex = from.lastIndex\n      } else if (isObject(from)) {\n        to = copy(from, Object.create(Object.getPrototypeOf(from)), stackFrom, stackTo, blacklist)\n      }\n    }\n  } else {\n    if (from === to) {\n      throw new Error('Cannot copy! Source and destination are identical.')\n    }\n\n    stackFrom = stackFrom || []\n    stackTo = stackTo || []\n\n    if (isObject(from)) {\n      let index = stackFrom.indexOf(from)\n      if (index !== -1) {\n        return stackTo[index]\n      }\n\n      stackFrom.push(from)\n      stackTo.push(to)\n    }\n\n    let result\n    if (isArray(from)) {\n      let i\n      to.length = 0\n      for (i = 0; i < from.length; i++) {\n        result = copy(from[i], null, stackFrom, stackTo, blacklist)\n        if (isObject(from[i])) {\n          stackFrom.push(from[i])\n          stackTo.push(result)\n        }\n        to.push(result)\n      }\n    } else {\n      if (isArray(to)) {\n        to.length = 0\n      } else {\n        forOwn(to, function (value, key) {\n          delete to[key]\n        })\n      }\n      for (var key in from) {\n        if (from.hasOwnProperty(key)) {\n          if (isBlacklisted(key, blacklist)) {\n            continue\n          }\n          result = copy(from[key], null, stackFrom, stackTo, blacklist)\n          if (isObject(from[key])) {\n            stackFrom.push(from[key])\n            stackTo.push(result)\n          }\n          to[key] = result\n        }\n      }\n    }\n  }\n  return to\n}\nconst SPLIT = /\\s+/\nconst NON_ALPHA = /[^A-Za-z]/g\nconst PASCAL_CASE = /(\\w)(\\w*)/g\nfunction pascalize (g0, g1, g2) {\n  return `${g1.toUpperCase()}${g2.toLowerCase()}`\n}\nfunction mapToPascal (x) {\n  return x.replace(NON_ALPHA, '').replace(PASCAL_CASE, pascalize)\n}\n/**\n * Convert a string to pascalcase.\n * @param {string} str - String to convert.\n * @return {string} Converted string.\n */\nexport function pascalCase (str) {\n  return str\n    .split(SPLIT)\n    .map(mapToPascal)\n    .join('')\n}\n/**\n * Convert a string to camelcase.\n * @param {string} str - String to convert.\n * @return {string} Converted string.\n */\nexport function camelCase (str) {\n  str = pascalCase(str)\n  if (str) {\n    return str.charAt(0).toLowerCase() + str.slice(1)\n  }\n  return str\n}\n/**\n * Add eventing capabilities into the target object.\n * @param {Object} target - Target object.\n * @param {Function} [getter] - Custom getter for retrieving the object's event\n * listeners.\n * @param {Function} [setter] - Custom setter for setting the object's event\n * listeners.\n */\nexport function eventify (target, getter, setter, enumerable) {\n  target = target || this\n  let _events = {}\n  if (!getter && !setter) {\n    getter = function () {\n      return _events\n    }\n    setter = function (value) {\n      _events = value\n    }\n  }\n  Object.defineProperties(target, {\n    on: {\n      enumerable: !!enumerable,\n      value (type, func, ctx) {\n        if (!getter.call(this)) {\n          setter.call(this, {})\n        }\n        const events = getter.call(this)\n        events[type] = events[type] || []\n        events[type].push({\n          f: func,\n          c: ctx\n        })\n      }\n    },\n    off: {\n      enumerable: !!enumerable,\n      value (type, func) {\n        const events = getter.call(this)\n        const listeners = events[type]\n        if (!listeners) {\n          setter.call(this, {})\n        } else if (func) {\n          for (let i = 0; i < listeners.length; i++) {\n            if (listeners[i].f === func) {\n              listeners.splice(i, 1)\n              break\n            }\n          }\n        } else {\n          listeners.splice(0, listeners.length)\n        }\n      }\n    },\n    emit: {\n      enumerable: !!enumerable,\n      value (...args) {\n        const events = getter.call(this) || {}\n        const type = args.shift()\n        let listeners = events[type] || []\n        let i\n        for (i = 0; i < listeners.length; i++) {\n          listeners[i].f.apply(listeners[i].c, args)\n        }\n        listeners = events.all || []\n        args.unshift(type)\n        for (i = 0; i < listeners.length; i++) {\n          listeners[i].f.apply(listeners[i].c, args)\n        }\n      }\n    }\n  })\n}\n\n/*eslint-disable*/\n// RiveraGroup/node-tiny-uuid\n// DO WTF YOU WANT TO PUBLIC LICENSE\nexport function uuid (a, b) {\n  for (\n    b = a = ''; // b - result , a - numeric variable\n    a++ < 36;\n    b += a * 51 & 52 // if \"a\" is not 9 or 14 or 19 or 24\n    ?  //  return a random number or 4\n    (\n      a ^ 15 // if \"a\" is not 15\n      ? // genetate a random number from 0 to 15\n      8 ^ Math.random() * (a ^ 20 ? 16 : 4) // unless \"a\" is 20, in which case a random number from 8 to 11\n      :\n      4 //  otherwise 4\n    ).toString(16)\n    :\n    '-' //  in other cases (if \"a\" is 9,14,19,24) insert \"-\"\n  );\n  return b\n}\n/*eslint-enable*/\n\nexport const classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError('Cannot call a class as a function')\n  }\n}\n\nexport const possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')\n  }\n\n  return call && (typeof call === 'object' || typeof call === 'function') ? call : self\n}\n\nexport const addHiddenPropsToTarget = function (target, props) {\n  forOwn(props, function (value, key) {\n    props[key] = {\n      value\n    }\n  })\n  Object.defineProperties(target, props)\n}\n\nexport const extend = function (props, classProps) {\n  const SuperClass = this\n  let SubClass\n\n  props || (props = {})\n  classProps || (classProps = {})\n\n  if (props.hasOwnProperty('constructor')) {\n    SubClass = props.constructor\n    delete props.constructor\n  } else {\n    SubClass = function (...args) {\n      classCallCheck(this, SubClass)\n      const _this = possibleConstructorReturn(this, (SubClass.__super__ || Object.getPrototypeOf(SubClass)).apply(this, args))\n      return _this\n    }\n  }\n\n  SubClass.prototype = Object.create(SuperClass && SuperClass.prototype, {\n    constructor: {\n      value: SubClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  })\n\n  if (Object.setPrototypeOf) {\n    Object.setPrototypeOf(SubClass, SuperClass)\n  } else if (classProps.strictEs6Class) {\n    SubClass.__proto__ = SuperClass // eslint-disable-line\n  } else {\n    forOwn(SuperClass, function (value, key) {\n      SubClass[key] = value\n    })\n  }\n  Object.defineProperty(SubClass, '__super__', {\n    configurable: true,\n    value: SuperClass\n  })\n\n  addHiddenPropsToTarget(SubClass.prototype, props)\n  fillIn(SubClass, classProps)\n\n  return SubClass\n}\n\nexport const getSuper = function (instance) {\n  const Ctor = instance.constructor\n  return (Ctor.__super__ || Object.getPrototypeOf(Ctor) || Ctor.__proto__)\n}","import {\n  addHiddenPropsToTarget,\n  classCallCheck,\n  extend,\n  forOwn,\n  get,\n  intersection,\n  isArray,\n  isFunction,\n  isNumber,\n  isObject,\n  isString\n} from './utils'\n\n/**\n * A class used by the @{link Collection} class to build queries to be executed\n * against the collection's data. An instance of `Query` is returned by\n * {@link Model.query} and {@link Collection.query}.\n * @class Query\n * @param {Collection} collection - The collection on which this query operates.\n */\nexport default function Query (collection) {\n  classCallCheck(this, Query)\n\n  /**\n   * The collection on which this query operates.\n   * @type {Collection}\n   */\n  this.collection = collection\n  /**\n   * The data result of this query.\n   * @type {Array}\n   */\n  this.data = null\n}\n\nQuery.extend = extend\n\nconst reserved = {\n  skip: '',\n  offset: '',\n  where: '',\n  limit: '',\n  orderBy: '',\n  sort: ''\n}\n\nconst escapeRegExp = /([.*+?^=!:${}()|[\\]\\/\\\\])/g\nconst percentRegExp = /%/g\nconst underscoreRegExp = /_/g\n\nfunction escape (pattern) {\n  return pattern.replace(escapeRegExp, '\\\\$1')\n}\n\nQuery.ops = {\n  '==': function (value, predicate) {\n    return value == predicate // eslint-disable-line\n  },\n  '===': function (value, predicate) {\n    return value === predicate\n  },\n  '!=': function (value, predicate) {\n    return value != predicate // eslint-disable-line\n  },\n  '!==': function (value, predicate) {\n    return value !== predicate\n  },\n  '>': function (value, predicate) {\n    return value > predicate\n  },\n  '>=': function (value, predicate) {\n    return value >= predicate\n  },\n  '<': function (value, predicate) {\n    return value < predicate\n  },\n  '<=': function (value, predicate) {\n    return value <= predicate\n  },\n  'isectEmpty': function (value, predicate) {\n    return !intersection((value || []), (predicate || [])).length\n  },\n  'isectNotEmpty': function (value, predicate) {\n    return intersection((value || []), (predicate || [])).length\n  },\n  'in': function (value, predicate) {\n    return predicate.indexOf(value) !== -1\n  },\n  'notIn': function (value, predicate) {\n    return predicate.indexOf(value) === -1\n  },\n  'contains': function (value, predicate) {\n    return (value || []).indexOf(predicate) !== -1\n  },\n  'notContains': function (value, predicate) {\n    return (value || []).indexOf(predicate) === -1\n  }\n}\n\naddHiddenPropsToTarget(Query.prototype, {\n  compare (orderBy, index, a, b) {\n    const def = orderBy[index]\n    let cA = get(a, def[0])\n    let cB = get(b, def[0])\n    if (cA && isString(cA)) {\n      cA = cA.toUpperCase()\n    }\n    if (cB && isString(cB)) {\n      cB = cB.toUpperCase()\n    }\n    a || (a = null)\n    b || (b = null)\n    if (def[1] === 'DESC') {\n      if (cB < cA) {\n        return -1\n      } else if (cB > cA) {\n        return 1\n      } else {\n        if (index < orderBy.length - 1) {\n          return this.compare(orderBy, index + 1, a, b)\n        } else {\n          return 0\n        }\n      }\n    } else {\n      if (cA < cB) {\n        return -1\n      } else if (cA > cB) {\n        return 1\n      } else {\n        if (index < orderBy.length - 1) {\n          return this.compare(orderBy, index + 1, a, b)\n        } else {\n          return 0\n        }\n      }\n    }\n  },\n\n  evaluate (value, op, predicate) {\n    if (Query.ops[op]) {\n      return Query.ops[op](value, predicate)\n    }\n    if (op.indexOf('like') === 0) {\n      return this.like(predicate, op.substr(4)).exec(value) !== null\n    } else if (op.indexOf('notLike') === 0) {\n      return this.like(predicate, op.substr(7)).exec(value) === null\n    }\n  },\n\n  like (pattern, flags) {\n    return new RegExp(`^${(escape(pattern).replace(percentRegExp, '.*').replace(underscoreRegExp, '.'))}$`, flags)\n  },\n\n  /**\n   * Return the current data result of this query.\n   * @memberof Query\n   * @instance\n   * @return {Array} The data in this query.\n   */\n  getData () {\n    if (!this.data) {\n      this.data = this.collection.index.getAll()\n    }\n    return this.data\n  },\n\n  /**\n   * Find all entities between two boundaries.\n   *\n   * Get the users ages 18 to 30\n   * ```js\n   * const users = query.between(18, 30, { index: 'age' }).run()\n   * ```\n   * Same as above\n   * ```js\n   * const users = query.between([18], [30], { index: 'age' }).run()\n   * ```\n   *\n   * @memberof Query\n   * @instance\n   * @param {Array} leftKeys - Keys defining the left boundary.\n   * @param {Array} rightKeys - Keys defining the right boundary.\n   * @param {Object} [opts] - Configuration options.\n   * @param {string} [opts.index] - Name of the secondary index to use in the\n   * query. If no index is specified, the main index is used.\n   * @param {boolean} [opts.leftInclusive=true] - Whether to include entities\n   * on the left boundary.\n   * @param {boolean} [opts.rightInclusive=false] - Whether to include entities\n   * on the left boundary.\n   * @param {boolean} [opts.limit] - Limit the result to a certain number.\n   * @param {boolean} [opts.offset] - The number of resulting entities to skip.\n   * @return {Query} A reference to itself for chaining.\n   */\n  between (leftKeys, rightKeys, opts) {\n    opts || (opts = {})\n    const collection = this.collection\n    const index = opts.index ? collection.indexes[opts.index] : collection.index\n    if (this.data) {\n      throw new Error('Cannot access index after first operation!')\n    }\n    this.data = index.between(leftKeys, rightKeys, opts)\n    return this\n  },\n\n  /**\n   * Find the entity or entities that match the provided key.\n   *\n   * #### Example\n   *\n   * Get the entity whose primary key is 25\n   * ```js\n   * const entities = query.get(25).run()\n   * ```\n   * Same as above\n   * ```js\n   * const entities = query.get([25]).run()\n   * ```\n   * Get all users who are active and have the \"admin\" role\n   * ```js\n   * const activeAdmins = query.get(['active', 'admin'], {\n   *   index: 'activityAndRoles'\n   * }).run()\n   * ```\n   * Get all entities that match a certain weather condition\n   * ```js\n   * const niceDays = query.get(['sunny', 'humid', 'calm'], {\n   *   index: 'weatherConditions'\n   * }).run()\n   * ```\n   *\n   * @memberof Query\n   * @instance\n   * @param {Array} keyList - Key(s) defining the entity to retrieve. If\n   * `keyList` is not an array (i.e. for a single-value key), it will be\n   * wrapped in an array.\n   * @param {Object} [opts] - Configuration options.\n   * @param {string} [opts.string] - Name of the secondary index to use in the\n   * query. If no index is specified, the main index is used.\n   * @return {Query} A reference to itself for chaining.\n   */\n  get (keyList = [], opts) {\n    opts || (opts = {})\n    if (this.data) {\n      throw new Error('Cannot access index after first operation!')\n    }\n    if (keyList && !isArray(keyList)) {\n      keyList = [keyList]\n    }\n    if (!keyList.length) {\n      this.getData()\n      return this\n    }\n    const collection = this.collection\n    const index = opts.index ? collection.indexes[opts.index] : collection.index\n    this.data = index.get(keyList)\n    return this\n  },\n\n  /**\n   * Find the entity or entities that match the provided keyLists.\n   *\n   * #### Example\n   *\n   * Get the posts where \"status\" is \"draft\" or \"inReview\"\n   * ```js\n   * const posts = query.getAll('draft', 'inReview', { index: 'status' }).run()\n   * ```\n   * Same as above\n   * ```js\n   * const posts = query.getAll(['draft'], ['inReview'], { index: 'status' }).run()\n   * ```\n   *\n   * @memberof Query\n   * @instance\n   * @param {...Array} [keyList] - Provide one or more keyLists, and all\n   * entities matching each keyList will be retrieved. If no keyLists are\n   * provided, all entities will be returned.\n   * @param {Object} [opts] - Configuration options.\n   * @param {string} [opts.index] - Name of the secondary index to use in the\n   * query. If no index is specified, the main index is used.\n   * @return {Query} A reference to itself for chaining.\n   */\n  getAll (...args) {\n    let opts = {}\n    if (this.data) {\n      throw new Error('Cannot access index after first operation!')\n    }\n    if (!args.length || args.length === 1 && isObject(args[0])) {\n      this.getData()\n      return this\n    } else if (args.length && isObject(args[args.length - 1])) {\n      opts = args[args.length - 1]\n      args.pop()\n    }\n    const collection = this.collection\n    const index = opts.index ? collection.indexes[opts.index] : collection.index\n    this.data = []\n    args.forEach(keyList => {\n      this.data = this.data.concat(index.get(keyList))\n    })\n    return this\n  },\n\n  /**\n   * Find the entity or entities that match the provided query or pass the\n   * provided filter function.\n   *\n   * #### Example\n   *\n   * Get the draft posts created less than three months\n   * ```js\n   * const posts = query.filter({\n   *   where: {\n   *     status: {\n   *       '==': 'draft'\n   *     },\n   *     created_at_timestamp: {\n   *       '>=': (new Date().getTime() - (1000 * 60 * 60 * 24 * 30 * 3)) // 3 months ago\n   *     }\n   *   }\n   * }).run()\n   * ```\n   * Use a custom filter function\n   * ```js\n   * const posts = query.filter(function (post) {\n   *   return post.isReady()\n   * }).run()\n   * ```\n   *\n   * @memberof Query\n   * @instance\n   * @param {(Object|Function)} [queryOrFn={}] - Selection query or filter\n   * function.\n   * @param {Function} [thisArg] - Context to which to bind `queryOrFn` if\n   * `queryOrFn` is a function.\n   * @return {Query} A reference to itself for chaining.\n   */\n  filter (query, thisArg) {\n    const self = this\n    query || (query = {})\n    self.getData()\n    if (isObject(query)) {\n      let where = {}\n      // Filter\n      if (isObject(query.where)) {\n        where = query.where\n      }\n      forOwn(query, function (value, key) {\n        if (!(key in reserved) && !(key in where)) {\n          where[key] = {\n            '==': value\n          }\n        }\n      })\n\n      const fields = []\n      const ops = []\n      const predicates = []\n      forOwn(where, function (clause, field) {\n        if (!isObject(clause)) {\n          clause = {\n            '==': clause\n          }\n        }\n        forOwn(clause, function (expr, op) {\n          fields.push(field)\n          ops.push(op)\n          predicates.push(expr)\n        })\n      })\n      if (fields.length) {\n        let i\n        let len = fields.length\n        self.data = self.data.filter(function (item) {\n          let first = true\n          let keep = true\n\n          for (i = 0; i < len; i++) {\n            let op = ops[i]\n            const isOr = op.charAt(0) === '|'\n            op = isOr ? op.substr(1) : op\n            const expr = self.evaluate(get(item, fields[i]), op, predicates[i])\n            if (expr !== undefined) {\n              keep = first ? expr : (isOr ? keep || expr : keep && expr)\n            }\n            first = false\n          }\n          return keep\n        })\n      }\n\n      // Sort\n      let orderBy = query.orderBy || query.sort\n\n      if (isString(orderBy)) {\n        orderBy = [\n          [orderBy, 'ASC']\n        ]\n      }\n      if (!isArray(orderBy)) {\n        orderBy = null\n      }\n\n      // Apply 'orderBy'\n      if (orderBy) {\n        let index = 0\n        orderBy.forEach(function (def, i) {\n          if (isString(def)) {\n            orderBy[i] = [def, 'ASC']\n          }\n        })\n        self.data.sort(function (a, b) {\n          return self.compare(orderBy, index, a, b)\n        })\n      }\n\n      // Skip\n      if (isNumber(query.skip)) {\n        self.skip(query.skip)\n      } else if (isNumber(query.offset)) {\n        self.skip(query.offset)\n      }\n      // Limit\n      if (isNumber(query.limit)) {\n        self.limit(query.limit)\n      }\n    } else if (isFunction(query)) {\n      self.data = self.data.filter(query, thisArg)\n    }\n    return self\n  },\n\n  /**\n   * Skip a number of results.\n   *\n   * #### Example\n   *\n   * Get all but the first 10 draft posts\n   * ```js\n   * const posts = query.get('draft', { index: 'status' }).skip(10).run()\n   * ```\n   *\n   * @memberof Query\n   * @instance\n   * @param {number} num - The number of entities to skip.\n   * @return {Query} A reference to itself for chaining.\n   */\n  skip (num) {\n    if (!isNumber(num)) {\n      throw new TypeError(`skip: Expected number but found ${typeof num}!`)\n    }\n    const data = this.getData()\n    if (num < data.length) {\n      this.data = data.slice(num)\n    } else {\n      this.data = []\n    }\n    return this\n  },\n\n  /**\n   * Limit the result.\n   *\n   * #### Example\n   *\n   * Get only the first 10 draft posts\n   * ```js\n   * const posts = query.get('draft', { index: 'status' }).limit(10).run()\n   * ```\n   *\n   * @memberof Query\n   * @instance\n   * @param {number} num - The maximum number of entities to keep in the result.\n   * @return {Query} A reference to itself for chaining.\n   */\n  limit (num) {\n    if (!isNumber(num)) {\n      throw new TypeError(`limit: Expected number but found ${typeof num}!`)\n    }\n    const data = this.getData()\n    this.data = data.slice(0, Math.min(data.length, num))\n    return this\n  },\n\n  /**\n   * Iterate over all entities.\n   *\n   * @memberof Query\n   * @instance\n   * @param {Function} forEachFn - Iteration function.\n   * @param {*} [thisArg] - Context to which to bind `forEachFn`.\n   * @return {Query} A reference to itself for chaining.\n   */\n  forEach (forEachFn, thisArg) {\n    this.getData().forEach(forEachFn, thisArg)\n    return this\n  },\n\n  /**\n   * Apply a mapping function to the result data.\n   *\n   * @memberof Query\n   * @instance\n   * @param {Function} mapFn - Mapping function.\n   * @param {*} [thisArg] - Context to which to bind `mapFn`.\n   * @return {Query} A reference to itself for chaining.\n   */\n  map (mapFn, thisArg) {\n    this.data = this.getData().map(mapFn, thisArg)\n    return this\n  },\n\n  /**\n   * Return the result of calling the specified function on each item in this\n   * collection's main index.\n   * @memberof Query\n   * @instance\n   * @param {string} funcName - Name of function to call\n   * @parama {...*} [args] - Remaining arguments to be passed to the function.\n   * @return {Query} A reference to itself for chaining.\n   */\n  mapCall (funcName, ...args) {\n    this.data = this.getData().map(function (item) {\n      return item[funcName](...args)\n    })\n    return this\n  },\n\n  /**\n   * Complete the execution of the query and return the resulting data.\n   *\n   * @memberof Query\n   * @instance\n   * @return {Array} The result of executing this query.\n   */\n  run () {\n    const data = this.data\n    this.data = null\n    return data\n  }\n})\n","export function sort (a, b, hashCode) {\n  // Short-curcuit comparison if a and b are strictly equal\n  // This is absolutely necessary for indexed objects that\n  // don't have the idAttribute field\n  if (a === b) {\n    return 0\n  }\n  if (hashCode) {\n    a = hashCode(a)\n    b = hashCode(b)\n  }\n  if (a === null && b === null) {\n    return 0\n  }\n\n  if (a === null) {\n    return -1\n  }\n\n  if (b === null) {\n    return 1\n  }\n\n  if (a < b) {\n    return -1\n  }\n\n  if (a > b) {\n    return 1\n  }\n\n  return 0\n}\n\nexport function insertAt (array, index, value) {\n  array.splice(index, 0, value)\n  return array\n}\n\nexport function removeAt (array, index) {\n  array.splice(index, 1)\n  return array\n}\n\nexport function binarySearch (array, value, field) {\n  let lo = 0\n  let hi = array.length\n  let compared\n  let mid\n\n  while (lo < hi) {\n    mid = ((lo + hi) / 2) | 0\n    compared = sort(value, array[mid], field)\n    if (compared === 0) {\n      return {\n        found: true,\n        index: mid\n      }\n    } else if (compared < 0) {\n      hi = mid\n    } else {\n      lo = mid + 1\n    }\n  }\n\n  return {\n    found: false,\n    index: hi\n  }\n}\n","// Copyright (c) 2015, InternalFX.\n\n// Permission to use, copy, modify, and/or distribute this software for any purpose with or\n// without fee is hereby granted, provided that the above copyright notice and this permission\n// notice appear in all copies.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO\n// THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT\n// SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR\n// ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION\n// OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE\n// USE OR PERFORMANCE OF THIS SOFTWARE.\n\n// Modifications\n// Copyright 2015 Jason Dobry\n//\n// Summary of modifications:\n// Converted to ES6 Class syntax\n// Reworked dependencies so as to re-use code already in js-data\nimport {\n  addHiddenPropsToTarget,\n  classCallCheck,\n  copy,\n  fillIn,\n  forOwn,\n  isArray,\n  isFunction\n} from '../../src/utils'\nimport {binarySearch, insertAt, removeAt} from './utils'\n\nconst blacklist = { '>': 1, '>=': 1, '<': 1, '<=': 1 }\n\nexport function Index (fieldList, opts) {\n  classCallCheck(this, Index)\n  fieldList || (fieldList = [])\n\n  if (!isArray(fieldList)) {\n    throw new Error('fieldList must be an array.')\n  }\n\n  opts || (opts = {})\n  this.fieldList = fieldList\n  this.fieldGetter = opts.fieldGetter\n  this.hashCode = opts.hashCode\n  this.isIndex = true\n  this.keys = []\n  this.values = []\n}\n\naddHiddenPropsToTarget(Index.prototype, {\n  set (keyList, value) {\n    if (!isArray(keyList)) {\n      keyList = [keyList]\n    }\n\n    let key = keyList.shift() || null\n    let pos = binarySearch(this.keys, key)\n\n    if (keyList.length === 0) {\n      if (pos.found) {\n        let dataLocation = binarySearch(this.values[pos.index], value, this.hashCode)\n        if (!dataLocation.found) {\n          insertAt(this.values[pos.index], dataLocation.index, value)\n        }\n      } else {\n        insertAt(this.keys, pos.index, key)\n        insertAt(this.values, pos.index, [value])\n      }\n    } else {\n      if (pos.found) {\n        this.values[pos.index].set(keyList, value)\n      } else {\n        insertAt(this.keys, pos.index, key)\n        let newIndex = new Index([], { hashCode: this.hashCode })\n        newIndex.set(keyList, value)\n        insertAt(this.values, pos.index, newIndex)\n      }\n    }\n  },\n\n  get (keyList) {\n    if (!isArray(keyList)) {\n      keyList = [keyList]\n    }\n\n    let key = keyList.shift() || null\n    let pos = binarySearch(this.keys, key)\n\n    if (keyList.length === 0) {\n      if (pos.found) {\n        if (this.values[pos.index].isIndex) {\n          return this.values[pos.index].getAll()\n        } else {\n          return this.values[pos.index]\n        }\n      } else {\n        return []\n      }\n    } else {\n      if (pos.found) {\n        return this.values[pos.index].get(keyList)\n      } else {\n        return []\n      }\n    }\n  },\n\n  getAll () {\n    let results = []\n    this.values.forEach(function (value) {\n      if (value.isIndex) {\n        results = results.concat(value.getAll())\n      } else {\n        results = results.concat(value)\n      }\n    })\n    return results\n  },\n\n  visitAll (cb, thisArg) {\n    this.values.forEach(function (value) {\n      if (value.isIndex) {\n        value.visitAll(cb, thisArg)\n      } else {\n        value.forEach(cb, thisArg)\n      }\n    })\n  },\n\n  query (query) {\n    let leftKeys\n    let rightKeys\n\n    if (query['>']) {\n      leftKeys = query['>']\n      query.leftInclusive = false\n    } else if (query['>=']) {\n      leftKeys = query['>=']\n      query.leftInclusive = true\n    }\n\n    if (query['<']) {\n      rightKeys = query['<']\n      query.rightInclusive = false\n    } else if (query['<=']) {\n      rightKeys = query['<=']\n      query.rightInclusive = true\n    }\n\n    if (leftKeys.length !== rightKeys.length) {\n      throw new Error('Key arrays must be same length')\n    }\n\n    const _opts = {}\n    forOwn(query, function (value, key) {\n      if (!blacklist[key]) {\n        _opts[key] = value\n      }\n    })\n    return this.between(leftKeys, rightKeys, _opts)\n  },\n\n  between (leftKeys, rightKeys, opts = {}) {\n    if (!isArray(leftKeys)) {\n      leftKeys = [leftKeys]\n    }\n    if (!isArray(rightKeys)) {\n      rightKeys = [rightKeys]\n    }\n    fillIn(opts, {\n      leftInclusive: true,\n      rightInclusive: false,\n      limit: undefined,\n      offset: 0\n    })\n\n    let results = this._between(leftKeys, rightKeys, opts)\n\n    if (opts.limit) {\n      return results.slice(opts.offset, opts.limit + opts.offset)\n    } else {\n      return results.slice(opts.offset)\n    }\n  },\n\n  _between (leftKeys, rightKeys, opts) {\n    let results = []\n\n    let leftKey = leftKeys.shift()\n    let rightKey = rightKeys.shift()\n\n    let pos\n\n    if (leftKey !== undefined) {\n      pos = binarySearch(this.keys, leftKey)\n    } else {\n      pos = {\n        found: false,\n        index: 0\n      }\n    }\n\n    if (leftKeys.length === 0) {\n      if (pos.found && opts.leftInclusive === false) {\n        pos.index += 1\n      }\n\n      for (let i = pos.index; i < this.keys.length; i += 1) {\n        if (rightKey !== undefined) {\n          if (opts.rightInclusive) {\n            if (this.keys[i] > rightKey) { break }\n          } else {\n            if (this.keys[i] >= rightKey) { break }\n          }\n        }\n\n        if (this.values[i].isIndex) {\n          results = results.concat(this.values[i].getAll())\n        } else {\n          results = results.concat(this.values[i])\n        }\n\n        if (opts.limit) {\n          if (results.length >= (opts.limit + opts.offset)) {\n            break\n          }\n        }\n      }\n    } else {\n      for (let i = pos.index; i < this.keys.length; i += 1) {\n        let currKey = this.keys[i]\n        if (currKey > rightKey) { break }\n\n        if (this.values[i].isIndex) {\n          if (currKey === leftKey) {\n            results = results.concat(this.values[i]._between(copy(leftKeys), rightKeys.map(function () { return undefined }), opts))\n          } else if (currKey === rightKey) {\n            results = results.concat(this.values[i]._between(leftKeys.map(function () { return undefined }), copy(rightKeys), opts))\n          } else {\n            results = results.concat(this.values[i].getAll())\n          }\n        } else {\n          results = results.concat(this.values[i])\n        }\n\n        if (opts.limit) {\n          if (results.length >= (opts.limit + opts.offset)) {\n            break\n          }\n        }\n      }\n    }\n\n    if (opts.limit) {\n      return results.slice(0, opts.limit + opts.offset)\n    } else {\n      return results\n    }\n  },\n\n  peek () {\n    if (this.values.length) {\n      if (this.values[0].isIndex) {\n        return this.values[0].peek()\n      } else {\n        return this.values[0]\n      }\n    }\n    return []\n  },\n\n  remove (keyList, value) {\n    if (!isArray(keyList)) {\n      keyList = [keyList]\n    }\n\n    let key = keyList.shift()\n    let pos = binarySearch(this.keys, key)\n\n    if (keyList.length === 0) {\n      if (pos.found) {\n        let dataLocation = binarySearch(this.values[pos.index], value, this.hashCode)\n        if (dataLocation.found) {\n          removeAt(this.values[pos.index], dataLocation.index)\n          if (this.values[pos.index].length === 0) {\n            removeAt(this.keys, pos.index)\n            removeAt(this.values, pos.index)\n          }\n        }\n      }\n    } else {\n      if (pos.found) {\n        this.values[pos.index].delete(keyList, value)\n      }\n    }\n  },\n\n  clear () {\n    this.keys = []\n    this.values = []\n  },\n\n  insertRecord (data) {\n    let keyList = this.fieldList.map(function (field) {\n      if (isFunction(field)) {\n        return field(data) || null\n      } else {\n        return data[field] || null\n      }\n    })\n    this.set(keyList, data)\n  },\n\n  removeRecord (data) {\n    let removed\n    this.values.forEach((value, i) => {\n      if (value.isIndex) {\n        if (value.removeRecord(data)) {\n          if (value.keys.length === 0) {\n            removeAt(this.keys, i)\n            removeAt(this.values, i)\n          }\n          removed = true\n          return false\n        }\n      } else {\n        const dataLocation = binarySearch(value, data, this.hashCode)\n        if (dataLocation.found) {\n          removeAt(value, dataLocation.index)\n          if (value.length === 0) {\n            removeAt(this.keys, i)\n            removeAt(this.values, i)\n          }\n          removed = true\n          return false\n        }\n      }\n    })\n    return removed ? data : undefined\n  },\n\n  updateRecord (data) {\n    this.removeRecord(data)\n    this.insertRecord(data)\n  }\n})\n","import Query from './query'\nimport {\n  _,\n  addHiddenPropsToTarget,\n  classCallCheck,\n  deepMixIn,\n  eventify,\n  extend,\n  fillIn,\n  forOwn,\n  get,\n  isArray,\n  isFunction,\n  isObject,\n  isSorN,\n  isString,\n  set,\n  uuid\n} from './utils'\nimport {Index} from '../lib/mindex/index'\n\nconst COLLECTION_DEFAULTS = {\n  /**\n   * TODO\n   *\n   * @name Collection#autoPk\n   * @type {boolean}\n   * @default false\n   */\n  autoPk: false,\n\n  /**\n   * Field to be used as the unique identifier for records in this collection.\n   * Defaults to `\"id\"` unless {@link Collection#mapper} is set, in which case\n   * this will default to {@link Mapper#idAttribute}.\n   *\n   * @name Collection#idAttribute\n   * @type {string}\n   * @default \"id\"\n   */\n  idAttribute: 'id',\n\n  /**\n   * TODO\n   *\n   * @name Collection#mapper\n   * @type {Mapper}\n   * @default null\n   */\n  mapper: null,\n\n  /**\n   * What to do when inserting a record into this Collection that shares a\n   * primary key with a record already in this Collection.\n   *\n   * Possible values:\n   * - merge\n   * - replace\n   *\n   * Merge:\n   *\n   * Recursively shallow copy properties from the new record onto the existing\n   * record.\n   *\n   * Replace:\n   *\n   * Shallow copy top-level properties from the new record onto the existing\n   * record. Any top-level own properties of the existing record that are _not_\n   * on the new record will be removed.\n   *\n   * @name Collection#onConflict\n   * @type {string}\n   * @default \"merge\"\n   */\n  onConflict: 'merge',\n\n  /**\n   * TODO\n   *\n   * @name Collection#recordOpts\n   * @type {Object}\n   * @default {}\n   */\n  recordOpts: {}\n}\n\n/**\n * An ordered set of records.\n *\n * ```javascript\n * import {Collection, Record} from 'js-data'\n * const record1 = new Record({ id: 1 })\n * const record2 = new Record({ id: 2 })\n * const UserCollection = new Collection([record1, record2])\n * UserCollection.get(1) === record1 // true\n * ```\n *\n * @class Collection\n * @param {Array} [records] Initial set of records to insert into the\n * collection.\n * @param {Object} [opts] Configuration options.\n * @param {boolean} [opts.autoPk=false] TODO\n * @param {string} [opts.idAttribute] TODO\n * @param {string} [opts.onConflict=merge] TODO\n * @param {string} [opts.mapper] TODO\n * @param {Object} [opts.recordOpts={}] TODO\n */\nexport default function Collection (records, opts) {\n  const self = this\n\n  classCallCheck(self, Collection)\n\n  if (isObject(records) && !isArray(records)) {\n    opts = records\n    records = []\n  }\n\n  // Default values for arguments\n  records || (records = [])\n  opts || (opts = {})\n\n  fillIn(self, opts)\n\n  /**\n   * Event listeners attached to this Collection.\n   *\n   * @name Collection#_listeners\n   * @instance\n   * @type {Object}\n   * @private\n   */\n  self._listeners = {}\n\n  const idAttribute = self.recordId()\n\n  /**\n   * The main index, which uses @{link Collection#recordId} as the key.\n   * @name Collection#index\n   * @type {Index}\n   */\n  self.index = new Index([idAttribute], {\n    hashCode (obj) {\n      return get(obj, idAttribute)\n    }\n  })\n\n  /**\n   * Object that holds the secondary indexes of this collection.\n   * @name Collection#indexes\n   * @type {Object.<string, Index>}\n   */\n  self.indexes = {}\n\n  /**\n   * Object that holds the autoPks of records which needed ids to be generated.\n   * @name Collection#autoPks\n   * @type {Object.<number, Object>}\n   */\n  self.autoPks = {}\n\n  records.forEach(function (record) {\n    record = self.mapper ? self.mapper.createRecord(record) : record\n    self.index.insertRecord(record)\n    if (record && isFunction(record.on)) {\n      record.on('all', self._onRecordEvent, self)\n    }\n  })\n}\n\nCollection.extend = extend\n\n/**\n * TODO\n *\n * @name Collection#on\n * @instance\n * @method\n * @param {string} event TODO.\n * @param {Function} handler TODO\n */\n\n /**\n * TODO\n *\n * @name Collection#off\n * @instance\n * @method\n * @param {string} [event] TODO.\n * @param {Function} [handler] TODO\n */\n\n /**\n * TODO\n *\n * @name Collection#emit\n * @instance\n * @method\n * @param {string} event TODO.\n * @param {...*} [arg] TODO\n */\n\naddHiddenPropsToTarget(Collection.prototype, {\n  /**\n   * Used to bind to events emitted by records in this Collection.\n   *\n   * @name Collection#_onRecordEvent\n   * @method\n   * @private\n   * @param {...*} [arg] Args passed to {@link Collection#emit}.\n   */\n  _onRecordEvent (...args) {\n    this.emit(...args)\n  },\n\n  /**\n   * Insert the provided record or records.\n   *\n   * If a record is already in the collection then the provided record will\n   * either merge with or replace the existing record based on the value of the\n   * `onConflict` option.\n   *\n   * The collection's secondary indexes will be updated as each record is\n   * visited.\n   *\n   * @name Collection#add\n   * @method\n   * @param {(Object|Object[]|Record|Record[])} data The record or records to insert.\n   * @param {Object} [opts] - Configuration options.\n   * @param {boolean} [opts.autoPk={@link Collection.autoPk}] - Whether to\n   * generate primary keys for the records to be inserted. Useful for inserting\n   * temporary, unsaved data into the collection.\n   * @param {string} [opts.onConflict] - What to do when a record is already in\n   * the collection. Possible values are `merge` or `replace`.\n   * @return {(Object|Object[]|Record|Record[])} The added record or records.\n   */\n  add (records, opts) {\n    const self = this\n\n    // Default values for arguments\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Collection's configuration\n    _(self, opts)\n    records = self.beforeAdd(records, opts) || records\n\n    // Track whether just one record or an array of records is being inserted\n    let singular = false\n    const idAttribute = self.recordId()\n    if (!isArray(records)) {\n      records = [records]\n      singular = true\n    }\n\n    // Map the provided records to existing records.\n    // New records will be inserted. If any records map to existing records,\n    // they will be merged into the existing records according to the onConflict\n    // option.\n    records = records.map(function (record) {\n      let id = self.recordId(record)\n      // Track whether we had to generate an id for this record\n      // Validate that the primary key attached to the record is a string or\n      // number\n      let autoPk = false\n      if (!isSorN(id)) {\n        // No id found, generate one\n        if (opts.autoPk) {\n          id = uuid()\n          set(record, idAttribute, id)\n          autoPk = true\n        } else {\n          // Not going to generate one, throw an error\n          throw new TypeError(`${idAttribute}: Expected string or number, found ${typeof id}!`)\n        }\n      }\n      // Grab existing record if there is one\n      const existing = self.get(id)\n      // If the currently visited record is just a reference to an existing\n      // record, then there is nothing to be done. Exit early.\n      if (record === existing) {\n        return existing\n      }\n\n      if (existing) {\n        // Here, the currently visited record corresponds to a record already\n        // in the collection, so we need to merge them\n        const onConflict = opts.onConflict || self.onConflict\n        if (onConflict === 'merge') {\n          deepMixIn(existing, record)\n        } else if (onConflict === 'replace') {\n          forOwn(existing, (value, key) => {\n            if (key !== idAttribute && !record.hasOwnProperty(key)) {\n              delete existing[key]\n            }\n          })\n          existing.set(record)\n        }\n        record = existing\n        // Update all indexes in the collection\n        self.updateIndexes(record)\n      } else {\n        // Here, the currently visted record does not correspond to any record\n        // in the collection, so (optionally) instantiate this record and insert\n        // it into the collection\n        record = self.mapper ? self.mapper.createRecord(record) : record\n        self.index.insertRecord(record)\n        forOwn(self.indexes, function (index, name) {\n          index.insertRecord(record)\n        })\n        if (record && isFunction(record.on)) {\n          record.on('all', self._onRecordEvent, self)\n          // TODO: Make this more performant (batch events?)\n          self.emit('add', record)\n        }\n      }\n      if (autoPk) {\n        self.autoPks[id] = record\n      }\n      return record\n    })\n    // Finally, return the inserted data\n    const result = singular ? (records.length ? records[0] : undefined) : records\n    return self.afterAdd(records, opts, result) || result\n  },\n\n  /**\n   * Lifecycle hook called by {@link Collection#add}. If this method returns a\n   * value then {@link Collection#add} will return that same value.\n   *\n   * @name Collection#method\n   * @method\n   * @param {(Object|Object[]|Record|Record[])} result The record or records\n   * that were added to this Collection by {@link Collection#add}.\n   * @param {Object} opts The `opts` argument passed to {@link Collection#add}.\n   */\n  afterAdd () {},\n\n  /**\n   * Lifecycle hook called by {@link Collection#remove}. If this method returns\n   * a value then {@link Collection#remove} will return that same value.\n   *\n   * @name Collection#afterRemove\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Collection#remove}.\n   * @param {Object} opts The `opts` argument passed to {@link Collection#remove}.\n   * @param {Object} record The result that will be returned by {@link Collection#remove}.\n   */\n  afterRemove () {},\n\n  /**\n   * Lifecycle hook called by {@link Collection#removeAll}. If this method\n   * returns a value then {@link Collection#removeAll} will return that same\n   * value.\n   *\n   * @name Collection#afterRemoveAll\n   * @method\n   * @param {Object} query The `query` argument passed to {@link Collection#removeAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Collection#removeAll}.\n   * @param {Object} records The result that will be returned by {@link Collection#removeAll}.\n   */\n  afterRemoveAll () {},\n\n  /**\n   * Lifecycle hook called by {@link Collection#add}. If this method returns a\n   * value then the `records` argument in {@link Collection#add} will be\n   * re-assigned to the returned value.\n   *\n   * @name Collection#beforeAdd\n   * @method\n   * @param {(Object|Object[]|Record|Record[])} records The `records` argument passed to {@link Collection#add}.\n   * @param {Object} opts The `opts` argument passed to {@link Collection#add}.\n   */\n  beforeAdd () {},\n\n  /**\n   * Lifecycle hook called by {@link Collection#remove}.\n   *\n   * @name Collection#beforeRemove\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Collection#remove}.\n   * @param {Object} opts The `opts` argument passed to {@link Collection#remove}.\n   */\n  beforeRemove () {},\n\n  /**\n   * Lifecycle hook called by {@link Collection#removeAll}.\n   *\n   * @name Collection#beforeRemoveAll\n   * @method\n   * @param {Object} query The `query` argument passed to {@link Collection#removeAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Collection#removeAll}.\n   */\n  beforeRemoveAll () {},\n\n  /**\n   * Find all records between two boundaries.\n   *\n   * Shortcut for `collection.query().between(18, 30, { index: 'age' }).run()`\n   *\n   * Get all users ages 18 to 30:\n   * ```javascript\n   * const users = collection.between(18, 30, { index: 'age' })\n   * ```\n   * Same as above:\n   * ```javascript\n   * const users = collection.between([18], [30], { index: 'age' })\n   * ```\n   *\n   * @name Collection#between\n   * @method\n   * @param {Array} leftKeys Keys defining the left boundary.\n   * @param {Array} rightKeys Keys defining the right boundary.\n   * @param {Object} [opts] Configuration options.\n   * @param {string} [opts.index] Name of the secondary index to use in the\n   * query. If no index is specified, the main index is used.\n   * @param {boolean} [opts.leftInclusive=true] Whether to include records\n   * on the left boundary.\n   * @param {boolean} [opts.rightInclusive=false] Whether to include records\n   * on the left boundary.\n   * @param {boolean} [opts.limit] Limit the result to a certain number.\n   * @param {boolean} [opts.offset] The number of resulting records to skip.\n   * @return {Array} The result.\n   */\n  between (leftKeys, rightKeys, opts) {\n    return this.query().between(leftKeys, rightKeys, opts).run()\n  },\n\n  /**\n   * Create a new secondary index on the contents of the collection.\n   *\n   * Index users by age:\n   * ```javascript\n   * collection.createIndex('age')\n   * ```\n   * Index users by status and role:\n   * ```javascript\n   * collection.createIndex('statusAndRole', ['status', 'role'])\n   * ```\n   *\n   * @name Collection#createIndex\n   * @method\n   * @param {string} name - The name of the new secondary index.\n   * @param {string[]} [fieldList] - Array of field names to use as the key or\n   * compound key of the new secondary index. If no fieldList is provided, then\n   * the name will also be the field that is used to index the collection.\n   * @return {Collection} A reference to itself for chaining.\n   */\n  createIndex (name, fieldList, opts) {\n    const self = this\n    if (isString(name) && fieldList === undefined) {\n      fieldList = [name]\n    }\n    opts || (opts = {})\n    opts.hashCode = opts.hashCode || function (obj) {\n      return self.recordId(obj)\n    }\n    const index = self.indexes[name] = new Index(fieldList, opts)\n    self.index.visitAll(index.insertRecord, index)\n    return self\n  },\n\n  /**\n   * Find the record or records that match the provided query or pass the\n   * provided filter function.\n   *\n   * Shortcut for `collection.query().filter(queryOrFn[, thisArg]).run()`\n   *\n   * Get the draft posts created less than three months:\n   * ```javascript\n   * const posts = collection.filter({\n   *   where: {\n   *     status: {\n   *       '==': 'draft'\n   *     },\n   *     created_at_timestamp: {\n   *       '>=': (new Date().getTime() - (1000 * 60 * 60 * 24 * 30 * 3)) // 3 months ago\n   *     }\n   *   }\n   * })\n   * ```\n   * Use a custom filter function:\n   * ```javascript\n   * const posts = collection.filter(function (post) {\n   *   return post.isReady()\n   * })\n   * ```\n   *\n   * @name Collection#filter\n   * @method\n   * @param {(Object|Function)} [queryOrFn={}] - Selection query or filter\n   * function.\n   * @param {Object} [thisArg] - Context to which to bind `queryOrFn` if\n   * `queryOrFn` is a function.\n   * @return {Array} The result.\n   */\n  filter (query, thisArg) {\n    return this.query().filter(query, thisArg).run()\n  },\n\n  /**\n   * Iterate over all records.\n   *\n   * ```javascript\n   * collection.forEach(function (record) {\n   *   // do something\n   * })\n   * ```\n   *\n   * @name Collection#forEach\n   * @method\n   * @param {Function} forEachFn - Iteration function.\n   * @param {*} [thisArg] - Context to which to bind `forEachFn`.\n   * @return {Array} The result.\n   */\n  forEach (cb, thisArg) {\n    this.index.visitAll(cb, thisArg)\n  },\n\n  /**\n   * Get the record with the given id.\n   *\n   * @name Collection#get\n   * @method\n   * @param {(string|number)} id - The primary key of the record to get.\n   * @return {(Object|Record)} The record with the given id.\n   */\n  get (id) {\n    const instances = this.query().get(id).run()\n    return instances.length ? instances[0] : undefined\n  },\n\n  /**\n   * Find the record or records that match the provided keyLists.\n   *\n   * Shortcut for `collection.query().getAll(keyList1, keyList2, ...).run()`\n   *\n   * Get the posts where \"status\" is \"draft\" or \"inReview\":\n   * ```javascript\n   * const posts = collection.getAll('draft', 'inReview', { index: 'status' })\n   * ```\n   * Same as above:\n   * ```javascript\n   * const posts = collection.getAll(['draft'], ['inReview'], { index: 'status' })\n   * ```\n   *\n   * @name Collection#getAll\n   * @method\n   * @param {...Array} [keyList] - Provide one or more keyLists, and all\n   * records matching each keyList will be retrieved. If no keyLists are\n   * provided, all records will be returned.\n   * @param {Object} [opts] - Configuration options.\n   * @param {string} [opts.index] - Name of the secondary index to use in the\n   * query. If no index is specified, the main index is used.\n   * @return {Array} The result.\n   */\n  getAll (...args) {\n    return this.query().getAll(...args).run()\n  },\n\n  /**\n   * Return the records in this Collection that have a primary key that\n   * was automatically generated when they were inserted.\n   *\n   * @name Collection#getAutoPkItems\n   * @method\n   * @return {(Object[]|Record[])} The records that have autoPks.\n   */\n  getAutoPkItems () {\n    const self = this\n    return self.getAll().filter(function (record) {\n      return self.autoPks[self.recordId(record)]\n    })\n  },\n\n  /**\n   * Limit the result.\n   *\n   * Shortcut for `collection.query().limit(maximumNumber).run()`\n   *\n   * ```javascript\n   * const posts = collection.limit(10)\n   * ```\n   *\n   * @name Collection#limit\n   * @method\n   * @param {number} num - The maximum number of records to keep in the result.\n   * @return {Array} The result.\n   */\n  limit (num) {\n    return this.query().limit(num).run()\n  },\n\n  /**\n   * Apply a mapping function to all records.\n   *\n   * ```javascript\n   * const names = collection.map(function (user) {\n   *   return user.name\n   * })\n   * ```\n   *\n   * @name Collection#map\n   * @method\n   * @param {Function} mapFn - Mapping function.\n   * @param {*} [thisArg] - Context to which to bind `mapFn`.\n   * @return {Array} The result of the mapping.\n   */\n  map (cb, thisArg) {\n    const data = []\n    this.index.visitAll(function (value) {\n      data.push(cb.call(thisArg, value))\n    })\n    return data\n  },\n\n  /**\n   * Return the result of calling the specified function on each record in this\n   * collection's main index.\n   *\n   * @name Collection#mapCall\n   * @method\n   * @param {string} funcName - Name of function to call\n   * @parama {...*} [args] - Remaining arguments to be passed to the function.\n   * @return {Array} The result.\n   */\n  mapCall (funcName, ...args) {\n    const data = []\n    this.index.visitAll(function (record) {\n      data.push(record[funcName](...args))\n    })\n    return data\n  },\n\n  /**\n   * Return the primary key of the given, or if no record is provided, return the\n   * name of the field that holds the primary key of records in this Collection.\n   *\n   * @name Collection#record\n   * @method\n   * @param {(Object|Record)} [record] The record whose primary key is to be\n   * returned.\n   * @return {(string|number)} Primary key or name of field that holds primary\n   * key.\n   */\n  recordId (record) {\n    if (record) {\n      return get(record, this.recordId())\n    }\n    const self = this\n    return self.mapper ? self.mapper.idAttribute : self.idAttribute || 'id'\n  },\n\n  /**\n   * Create a new query to be executed against the contents of the collection.\n   * The result will be all or a subset of the contents of the collection.\n   *\n   * Grab page 2 of users between ages 18 and 30:\n   * ```javascript\n   * collection.query()\n   *   .between(18, 30, { index: 'age' }) // between ages 18 and 30\n   *   .skip(10) // second page\n   *   .limit(10) // page size\n   *   .run()\n   * ```\n   *\n   * @name Collection#query\n   * @method\n   * @return {Query} New query object.\n   */\n  query () {\n    return new Query(this)\n  },\n\n  /**\n   * Reduce the data in the collection to a single value and return the result.\n   *\n   * ```javascript\n   * const totalVotes = collection.reduce(function (prev, record) {\n   *   return prev + record.upVotes + record.downVotes\n   * }, 0)\n   * ```\n   *\n   * @name Collection#reduce\n   * @method\n   * @param {Function} cb - Reduction callback.\n   * @param {*} initialValue - Initial value of the reduction.\n   * @return {*} The result.\n   */\n  reduce (cb, initialValue) {\n    const data = this.getAll()\n    return data.reduce(cb, initialValue)\n  },\n\n  /**\n   * Remove the record with the given id from this Collection.\n   *\n   * @name Collection#remove\n   * @method\n   * @param {(string|number)} id - The primary key of the record to be removed.\n   * @param {Object} [opts] - Configuration options.\n   * @return {Object|Record} The removed record, if any.\n   */\n  remove (id, opts) {\n    const self = this\n\n    // Default values for arguments\n    opts || (opts = {})\n    self.beforeRemove(id, opts)\n    const record = self.get(id)\n\n    // The record is in the collection, remove it\n    if (record) {\n      delete self.autoPks[id]\n      self.index.removeRecord(record)\n      forOwn(self.indexes, function (index, name) {\n        index.removeRecord(record)\n      })\n      if (record && isFunction(record.off)) {\n        record.off('all', self._onRecordEvent, self)\n        self.emit('remove', record)\n      }\n    }\n    return self.afterRemove(id, opts, record) || record\n  },\n\n  /**\n   * Remove the record selected by \"query\" from this collection.\n   *\n   * @name Collection#removeAll\n   * @method\n   * @param {Object} [query={}] - Selection query.\n   * @param {Object} [query.where] - Filtering criteria.\n   * @param {number} [query.skip] - Number to skip.\n   * @param {number} [query.limit] - Number to limit to.\n   * @param {Array} [query.orderBy] - Sorting criteria.\n   * @param {Object} [opts] - Configuration options.\n   * @return {(Object[]|Record[])} The removed records, if any.\n   */\n  removeAll (query, opts) {\n    const self = this\n    // Default values for arguments\n    opts || (opts = {})\n    self.beforeRemoveAll(query, opts)\n    const records = self.filter(query)\n\n    // Remove each selected record from the collection\n    records.forEach(function (item) {\n      self.remove(self.recordId(item))\n    })\n    return self.afterRemoveAll(query, opts, records) || records\n  },\n\n  /**\n   * Skip a number of results.\n   *\n   * Shortcut for `collection.query().skip(numberToSkip).run()`\n   *\n   * ```javascript\n   * const posts = collection.skip(10)\n   * ```\n   *\n   * @name Collection#skip\n   * @method\n   * @param {number} num - The number of records to skip.\n   * @return {Array} The result.\n   */\n  skip (num) {\n    return this.query().skip(num).run()\n  },\n\n  /**\n   * Return the plain JSON representation of all items in this collection.\n   * Assumes records in this collection have a toJSON method.\n   *\n   * @name Collection#toJSON\n   * @method\n   * @param {Object} [opts] - Configuration options.\n   * @param {string[]} [opts.with] - Array of relation names or relation fields\n   * to include in the representation.\n   * @return {Array} The records.\n   */\n  toJSON (opts) {\n    return this.mapCall('toJSON', opts)\n  },\n\n  /**\n   * Update a record's position in a single index of this collection. See\n   * {@link Collection#updateIndexes} to update a record's position in all\n   * indexes at once.\n   *\n   * @name Collection#updateIndex\n   * @method\n   * @param {Object} record - The record to update.\n   * @param {Object} [opts] - Configuration options.\n   * @param {string} [opts.index] The index in which to update the record's\n   * position. If you don't specify an index then the record will be updated\n   * in the main index.\n   */\n  updateIndex (record, opts) {\n    opts || (opts = {})\n    const index = opts.index ? this.indexes[opts.index] : this.index\n    index.updateRecord(record)\n  },\n\n  /**\n   * TODO\n   *\n   * @name Collection#updateIndexes\n   * @method\n   * @param {Object} record - TODO\n   * @param {Object} [opts] - Configuration options.\n   */\n  updateIndexes (record) {\n    const self = this\n    self.index.updateRecord(record)\n    forOwn(self.indexes, function (index, name) {\n      index.updateRecord(record)\n    })\n  }\n})\n\neventify(\n  Collection.prototype,\n  function () {\n    return this._listeners\n  },\n  function (value) {\n    this._listeners = value\n  }\n)\n","import {\n  isString\n} from '../utils'\n\nconst op = 'belongsTo'\n\n/**\n * @ignore\n */\nfunction applyBelongsTo (Mapper, Relation, opts) {\n  opts || (opts = {})\n\n  const getRelation = opts.getRelation || function () {\n    return Relation\n  }\n\n  const localField = opts.localField\n  if (!localField) {\n    throw new Error('localField is required')\n  }\n\n  const foreignKey = opts.foreignKey || opts.localKey\n  if (!foreignKey) {\n    throw new Error('foreignKey is required')\n  }\n\n  // if (isFunction(Mapper.RecordClass)) {\n  //   // Setup configuration of the property\n  //   const descriptor = {\n  //     // Whether the field specified by \"localField\" will show up in \"for...in\"\n  //     enumerable: opts.enumerable !== undefined ? !!opts.enumerable : false,\n  //     // Set default method for retrieving the linked relation\n  //     get () {\n  //       return this._get(`links.${localField}`)\n  //     },\n  //     // Set default method for setting the linked relation\n  //     set (parent) {\n  //       const self = this\n  //       self._set(`links.${localField}`, parent)\n  //       set(self, foreignKey, parent ? get(parent, getRelation().idAttribute) : undefined)\n  //       return get(self, localField)\n  //     }\n  //   }\n\n  //   const originalGet = descriptor.get\n  //   const originalSet = descriptor.set\n\n  //   // Check for user-defined getter\n  //   if (opts.get) {\n  //     // Set user-defined getter\n  //     descriptor.get = function () {\n  //       // Call user-defined getter, passing in:\n  //       //  - target Mapper\n  //       //  - related Mapper\n  //       //  - instance of target Mapper\n  //       //  - the original getter function, in case the user wants to use it\n  //       return opts.get(Mapper, getRelation(), this, () => originalGet.call(this))\n  //     }\n  //     delete descriptor.writable\n  //   }\n\n  //   // Check for user-defined setter\n  //   if (opts.set) {\n  //     // Set user-defined setter\n  //     descriptor.set = function (parent) {\n  //       // Call user-defined getter, passing in:\n  //       //  - target Mapper\n  //       //  - related Mapper\n  //       //  - instance of target Mapper\n  //       //  - instance of related Mapper\n  //       //  - the original setter function, in case the user wants to use it\n  //       return opts.set(Mapper, getRelation(), this, parent, value => originalSet.call(this, value === undefined ? parent : value))\n  //     }\n  //     delete descriptor.writable\n  //   }\n\n  //   // Finally, added property to prototype of target Mapper\n  //   Object.defineProperty(Mapper.RecordClass.prototype, localField, descriptor)\n  // }\n\n  if (!Mapper.relationList) {\n    Mapper.relationList = []\n  }\n  if (!Mapper.relationFields) {\n    Mapper.relationFields = []\n  }\n  opts.type = 'belongsTo'\n  opts.name = Mapper.name\n  opts.relation = isString(Relation) ? Relation : Relation.name\n  opts.getRelation = getRelation\n  Mapper.relationList.push(opts)\n  Mapper.relationFields.push(localField)\n\n  // Return target Mapper for chaining\n  return Mapper\n}\n\n/**\n * @memberof! module:js-data\n *\n * @param {Mapper} Relation The Relation the target belongs to.\n * @param {Object} opts Configuration options.\n * @param {string} opts.foreignKey The field that holds the primary key of the\n * related record.\n * @param {string} opts.localField The field that holds a reference to the\n * related record object.\n * @return {Function} Invocation function, which accepts the target as the only\n * parameter.\n */\nexport function belongsTo (Relation, opts) {\n  return function (target) {\n    target.dbg(op, Relation, opts)\n    return applyBelongsTo(target, Relation, opts)\n  }\n}\n","import {copy, forOwn} from '../utils'\n\n/**\n * @memberof! module:js-data\n * @example\n * // ES6\n * import {configure, Model} from 'js-data'\n *\n * // @configure(opts) (ES7)\n * class User extends JSData.Model {}\n * configure(opts)(User)\n *\n * // ES5\n * var JSData = require('js-data')\n * var User = JSData.Model.extend()\n * User.configure(opts)\n *\n * @param {Object} opts - Properties to apply to the target.\n * @param {boolean} [overwrite=true] - Whether to overwrite properties that\n * already exist on the target.\n */\nexport function configure (opts, overwrite = true) {\n  opts = opts || {}\n  return function (target) {\n    forOwn(opts, function (value, key) {\n      if (target[key] === undefined || overwrite) {\n        target[key] = copy(value)\n      }\n    })\n    return target\n  }\n}\n","import {\n  isString\n} from '../utils'\n\nconst op = 'hasMany'\n\n/**\n * @ignore\n */\nfunction applyHasMany (Mapper, Relation, opts) {\n  opts || (opts = {})\n\n  const getRelation = opts.getRelation || function () {\n    return Relation\n  }\n\n  const localField = opts.localField\n  if (!localField) {\n    throw new Error('localField is required')\n  }\n\n  const foreignKey = opts.foreignKey\n  const localKeys = opts.localKeys\n  const foreignKeys = opts.foreignKeys\n  if (!foreignKey && !localKeys && !foreignKeys) {\n    throw new Error('one of (foreignKey, localKeys, foreignKeys) is required')\n  }\n\n  // // Setup configuration of the property\n  // const descriptor = {\n  //   // Whether the field specified by \"localField\" will show up in \"for...in\"\n  //   enumerable: opts.enumerable !== undefined ? !!opts.enumerable : false,\n  //   // Set default method for retrieving the linked relation\n  //   get () {\n  //     return this._get(`links.${getLocalField()}`)\n  //   },\n  //   // Set default method for setting the linked relation\n  //   set (children) {\n  //     if (!children) {\n  //       return\n  //     }\n  //     this._set(`links.${getLocalField()}`, children)\n  //     if (children && children.length) {\n  //       const id = get(this, Model.idAttribute)\n  //       if (foreignKey) {\n  //         children.forEach(function (child) {\n  //           set(child, foreignKey, id)\n  //         })\n  //       } else if (localKeys) {\n  //         const keys = []\n  //         children.forEach(function (child) {\n  //           keys.push(get(child, getRelation().idAttribute))\n  //         })\n  //         set(this, localKeys, keys)\n  //       } else if (foreignKeys) {\n  //         children.forEach(function (child) {\n  //           const keys = get(child, foreignKeys)\n  //           if (keys) {\n  //             if (keys.indexOf(id) === -1) {\n  //               keys.push(id)\n  //             }\n  //           } else {\n  //             set(child, foreignKeys, [id])\n  //           }\n  //         })\n  //       }\n  //     }\n  //     return get(this, getLocalField())\n  //   }\n  // }\n\n  // const originalGet = descriptor.get\n  // const originalSet = descriptor.set\n\n  // // Check for user-defined getter\n  // if (opts.get) {\n  //   // Set user-defined getter\n  //   descriptor.get = function () {\n  //     // Call user-defined getter, passing in:\n  //     //  - target Model\n  //     //  - related Model\n  //     //  - instance of target Model\n  //     //  - the original getter function, in case the user wants to use it\n  //     return opts.get(Model, getRelation(), this, () => originalGet.call(this))\n  //   }\n  // }\n\n  // // Check for user-defined setter\n  // if (opts.set) {\n  //   // Set user-defined setter\n  //   descriptor.set = function (children) {\n  //     // Call user-defined getter, passing in:\n  //     //  - target Model\n  //     //  - related Model\n  //     //  - instance of target Model\n  //     //  - instances of related Model\n  //     //  - the original setter function, in case the user wants to use it\n  //     return opts.set(Model, getRelation(), this, children, value => originalSet.call(this, value === undefined ? children : value))\n  //   }\n  // }\n\n  // // Finally, added property to prototype of target Model\n  // Object.defineProperty(Model.prototype, getLocalField(), descriptor)\n\n  if (!Mapper.relationList) {\n    Mapper.relationList = []\n  }\n  if (!Mapper.relationFields) {\n    Mapper.relationFields = []\n  }\n  opts.type = 'hasMany'\n  opts.name = Mapper.name\n  opts.relation = isString(Relation) ? Relation : Relation.name\n  opts.getRelation = getRelation\n  Mapper.relationList.push(opts)\n  Mapper.relationFields.push(localField)\n\n  // Return target Mapper for chaining\n  return Mapper\n}\n\n/**\n * @memberof! module:js-data\n *\n * @param {Mapper} Relation - The relation of which the target has many.\n * @param {Object} opts - Configuration options.\n * @param {string} opts.localField The field on the target where the relation\n * will be attached.\n * @return {Function} Invocation function, which accepts the target as the only\n * parameter.\n */\nexport function hasMany (Relation, opts) {\n  return function (target) {\n    target.dbg(op, Relation, opts)\n    return applyHasMany(target, Relation, opts)\n  }\n}\n","import {\n  isString\n} from '../utils'\n\nconst op = 'hasOne'\n\n/**\n * @ignore\n */\nfunction applyHasOne (Mapper, Relation, opts) {\n  opts || (opts = {})\n\n  const getRelation = opts.getRelation || function () {\n    return Relation\n  }\n\n  const localField = opts.localField\n  if (!localField) {\n    throw new Error('localField is required')\n  }\n\n  const foreignKey = opts.foreignKey\n  if (!foreignKey) {\n    throw new Error('foreignKey is required')\n  }\n\n  // // Setup configuration of the property\n  // const descriptor = {\n  //   // Whether the field specified by \"localField\" will show up in \"for...in\"\n  //   enumerable: opts.enumerable !== undefined ? !!opts.enumerable : false,\n  //   // Set default method for retrieving the linked relation\n  //   get () {\n  //     return this._get(`links.${getLocalField()}`)\n  //   },\n  //   // Set default method for setting the linked relation\n  //   set (child) {\n  //     if (!child) {\n  //       return\n  //     }\n  //     this._set(`links.${getLocalField()}`, child)\n  //     set(child, getForeignKey(), get(this, Model.idAttribute))\n  //     return get(this, getLocalField())\n  //   }\n  // }\n\n  // // Check for user-defined getter\n  // if (opts.get) {\n  //   const originalGet = descriptor.get\n  //   // Set user-defined getter\n  //   descriptor.get = function () {\n  //     // Call user-defined getter, passing in:\n  //     //  - target Model\n  //     //  - related Model\n  //     //  - instance of target Model\n  //     //  - the original getter function, in case the user wants to use it\n  //     return opts.get(Model, Relation, this, originalGet ? (...args) => originalGet.apply(this, args) : undefined)\n  //   }\n  // }\n\n  // // Check for user-defined setter\n  // if (opts.set) {\n  //   const originalSet = descriptor.set\n  //   // Set user-defined setter\n  //   descriptor.set = function (child) {\n  //     // Call user-defined getter, passing in:\n  //     //  - target Model\n  //     //  - related Model\n  //     //  - instance of target Model\n  //     //  - instance of related Model\n  //     //  - the original setter function, in case the user wants to use it\n  //     return opts.set(Model, Relation, this, child, originalSet ? (...args) => originalSet.apply(this, args) : undefined)\n  //   }\n  // }\n\n  // // Finally, added property to prototype of target Model\n  // Object.defineProperty(Model.prototype, getLocalField(), descriptor)\n\n  if (!Mapper.relationList) {\n    Mapper.relationList = []\n  }\n  if (!Mapper.relationFields) {\n    Mapper.relationFields = []\n  }\n  opts.type = 'hasOne'\n  opts.name = Mapper.name\n  opts.relation = isString(Relation) ? Relation : Relation.name\n  opts.getRelation = getRelation\n  Mapper.relationList.push(opts)\n  Mapper.relationFields.push(localField)\n\n  // Return target Mapper for chaining\n  return Mapper\n}\n\n/**\n * @memberof! module:js-data\n *\n * @param {Mapper} Relation The Relation of which the target has one.\n * @param {Object} opts Configuration options.\n * @param {string} opts.foreignKey The field that holds the primary key of the\n * related record.\n * @param {string} opts.localField The field on the target where the relation\n * will be attached.\n * @return {Function} Invocation function, which accepts the target as the only\n * parameter.\n */\nexport function hasOne (Relation, opts) {\n  return function (target) {\n    target.dbg(op, 'Relation:', Relation, 'opts:', opts)\n    return applyHasOne(target, Relation, opts)\n  }\n}\n","import {\n  forOwn,\n  get\n} from '../utils'\nimport {configure} from './configure'\n\nconst op = 'setSchema'\n\n/**\n * @param {Model} target - Target Model.\n * @param {string} key - Key for new property.\n * @param {Object} opts - Configuration options.\n * @ignore\n */\nfunction makeDescriptor (target, key, opts) {\n  const descriptor = {\n    enumerable: opts.enumerable !== undefined ? opts.enumerable : true\n  }\n  descriptor.get = function () {\n    return this._get(`props.${key}`)\n  }\n  descriptor.set = function (value) {\n    // TODO: rework this\n    // if (isFunction(opts.validate) && !opts.validate(value)) {\n    //   return false\n    // }\n    const _get = this._get\n    const _set = this._set\n    const _unset = this._unset\n    // if (!_get('noValidate')) {\n    //   const errors = validate(opts, value)\n    //   if (errors) {\n    //     throw new Error(errors.join(', '))\n    //   }\n    // }\n    if (opts.track && !_get('creating')) {\n      let changing = _get('changing')\n      const previous = _get(`previous.${key}`)\n      const current = _get(`props.${key}`)\n      let changed = _get('changed')\n      if (!changing) {\n        changed = []\n      }\n      const index = changed.indexOf(key)\n      if (current !== value && index === -1) {\n        changed.push(key)\n      }\n      if (previous !== value) {\n        _set(`changes.${key}`, value)\n      } else {\n        _unset(`changes.${key}`)\n        if (index >= 0) {\n          changed.splice(index, 1)\n        }\n      }\n      if (!changed.length) {\n        changing = false\n        _unset('changing')\n        _unset('changed')\n        if (_get('eventId')) {\n          clearTimeout(_get('eventId'))\n          _unset('eventId')\n        }\n      }\n      if (!changing && changed.length) {\n        _set('changed', changed)\n        _set('changing', true)\n        _set('eventId', setTimeout(() => {\n          _unset('changed')\n          _unset('eventId')\n          _unset('changing')\n          if (!_get('silent')) {\n            let i\n            for (i = 0; i < changed.length; i++) {\n              this.emit('change:' + changed[i], this, get(this, changed[i]))\n            }\n            this.emit('change', this, _get('changes'))\n          }\n          _unset('silent')\n        }, 0))\n      }\n    }\n    _set(`props.${key}`, value)\n    // if (_get('$') && opts.indexed) {\n    //   target.getCollection().updateIndex(this, { index: key })\n    // }\n    return value\n  }\n  // if (opts.indexed) {\n  //   // Update index\n  //   // TODO: Make this configurable, ie. immediate or lazy update\n  //   target.createIndex(key)\n  // }\n  if (opts.get) {\n    if (descriptor.get) {\n      const originalGet = descriptor.get\n      descriptor.get = function () {\n        return opts.get.call(this, originalGet)\n      }\n    } else {\n      descriptor.get = opts.get\n    }\n  }\n  if (opts.set) {\n    if (descriptor.set) {\n      const originalSet = descriptor.set\n      descriptor.set = function (value) {\n        return opts.set.call(this, value, originalSet)\n      }\n    } else {\n      descriptor.set = opts.set\n    }\n  }\n  return descriptor\n}\n\n/**\n * @memberof! module:js-data\n * @example\n * // ES6\n * import {setSchema, Model} from 'js-data'\n * const properties = {\n *   first: {},\n *   last: {},\n *   role: {\n *     value: 'dev'\n *   },\n *   // computed property\n *   name: {\n *     get() { return `${this.first} ${this.last}` },\n *     set(value) {\n *       let parts = value.split(' ')\n *       this.first = parts[0]\n *       this.last = parts[1]\n *       return this\n *     }\n *   }\n * }\n *\n * // @setSchema(properties) (ES7)\n * class User extends Model {}\n * User.setSchema(properties)\n *\n * // ES5\n * var JSData = require('js-data')\n * var User = JSData.Model.extend({}, { name: 'User' })\n * User.setSchema(properties)\n *\n * @param {Object.<string, Object>} opts - Property configurations.\n * @return {Function} Invocation function, which accepts the target as the only\n * parameter.\n */\nexport function setSchema (opts) {\n  opts || (opts = {})\n\n  return function (target) {\n    target.dbg(op, 'opts:', opts)\n\n    target.schema || (target.schema = {})\n    configure(target.schema, opts)\n\n    forOwn(opts, function (prop, key) {\n      const descriptor = makeDescriptor(target, key, prop)\n      // TODO: This won't work for properties of Object type, because all\n      // instances will share the prototype value\n      if (!descriptor.writable) {\n        Object.defineProperty(target.prototype, key, descriptor)\n      }\n    })\n    return target\n  }\n}\n","const op = 'registerAdapter'\n\n/**\n * Add the provided adapter to the target's \"adapters\" property, registering it\n * with the specified.\n * @memberof! module:js-data\n * @param {string} name - The name under which to register the adapter.\n * @param {Adapter} adapter - The adapter to register.\n * @param {Object} opts - Configuration options.\n * @param {boolean} [opts.default=false] - Whether to make the adapter the\n * default adapter for the target.\n * @return {Function} Invocation function, which accepts the target as the only\n * parameter.\n */\nexport function registerAdapter (name, adapter, opts) {\n  opts || (opts = {})\n  opts.op = op\n  return function (target) {\n    target.dbg(op, 'name:', name, 'adapter:', adapter, 'opts:', opts)\n    // Register the adapter\n    target.getAdapters()[name] = adapter\n    // Optionally make it the default adapter for the target.\n    if (opts === true || opts.default) {\n      target.defaultAdapter = name\n    }\n  }\n}\n","import {\n  _,\n  addHiddenPropsToTarget,\n  classCallCheck,\n  copy,\n  eventify,\n  extend,\n  fillIn,\n  forOwn,\n  get,\n  isFunction,\n  isObject,\n  isSorN,\n  isString,\n  resolve,\n  set\n} from './utils'\n\n/**\n * js-data's Record class.\n * @class Record\n *\n * @abstract\n * @param {Object} [props] The initial properties of the new Record instance.\n * @param {Object} [opts] Configuration options.\n * @param {boolean} [opts.noValidate=false] Whether to skip validation on the\n * initial properties.\n */\nexport default function Record (props, opts) {\n  const self = this\n  classCallCheck(self, Record)\n\n  props || (props = {})\n  opts || (opts = {})\n  const _props = {}\n  Object.defineProperties(self, {\n    _get: {\n      value (key) {\n        return get(_props, key)\n      }\n    },\n    _set: {\n      value (key, value) {\n        return set(_props, key, value)\n      }\n    }\n  })\n  self._set('creating', true)\n  if (opts.noValidate) {\n    self._set('noValidate', true)\n  }\n  fillIn(self, props)\n  self._set('creating')\n  self._set('changes', {})\n  self._set('noValidate')\n  self._set('previous', copy(props))\n}\n\nRecord.extend = extend\n\naddHiddenPropsToTarget(Record.prototype, {\n  _mapper () {\n    return this.constructor.Mapper\n  },\n\n  /**\n   * Return the value at the given path for this instance.\n   *\n   * @param {string} key - Path of value to retrieve.\n   * @return {*} Value at path.\n   */\n  get: function (key) {\n    return get(this, key)\n  },\n\n  /**\n   * Set the value for a given key, or the values for the given keys if \"key\" is\n   * an object.\n   *\n   * @param {(string|Object)} key - Key to set or hash of key-value pairs to set.\n   * @param {*} [value] - Value to set for the given key.\n   * @param {Object} [opts] - Optional configuration.\n   * @param {boolean} [opts.silent=false] - Whether to trigger change events.\n   */\n  set: function (key, value, opts) {\n    const self = this\n    if (isObject(key)) {\n      opts = value\n    }\n    opts || (opts = {})\n    if (opts.silent) {\n      self._set('silent', true)\n    }\n    set(self, key, value)\n    if (!self._get('eventId')) {\n      self._set('silent')\n    }\n  },\n\n  /**\n   * Unset the value for a given key.\n   *\n   * @param {string} key - Key to unset.\n   * @param {Object} [opts] - Optional configuration.\n   * @param {boolean} [opts.silent=false] - Whether to trigger change events.\n   */\n  unset (key, opts) {\n    this.set(key, undefined, opts)\n  },\n\n  hashCode () {\n    const self = this\n    return get(self, self._mapper().idAttribute)\n  },\n\n  changes (key) {\n    const self = this\n    if (key) {\n      return self._get(`changes.${key}`)\n    }\n    return self._get('changes')\n  },\n\n  hasChanges () {\n    return !!(this._get('changed') || []).length\n  },\n\n  commit () {\n    const self = this\n    self._set('changed')\n    self._set('changes', {})\n    self._set('previous', copy(self))\n    return self\n  },\n\n  previous (key) {\n    const self = this\n    if (key) {\n      return self._get(`previous.${key}`)\n    }\n    return self._get('previous')\n  },\n\n  revert (opts) {\n    const self = this\n    const previous = self._get('previous') || {}\n    opts || (opts = {})\n    opts.preserve || (opts.preserve = [])\n    forOwn(self, (value, key) => {\n      if (key !== self._mapper().idAttribute && !previous.hasOwnProperty(key) && self.hasOwnProperty(key) && opts.preserve.indexOf(key) === -1) {\n        delete self[key]\n      }\n    })\n    forOwn(previous, (value, key) => {\n      if (opts.preserve.indexOf(key) === -1) {\n        self[key] = value\n      }\n    })\n    self.commit()\n    return self\n  },\n\n  schema (key) {\n    let _schema = this._mapper().schema\n    return key ? _schema[key] : _schema\n  },\n\n  // validate (obj, value) {\n  //   let errors = []\n  //   let _schema = this.schema()\n  //   if (!obj) {\n  //     obj = this\n  //   } else if (utils.isString(obj)) {\n  //     const prop = _schema[obj]\n  //     if (prop) {\n  //       errors = validate.validate(prop, value) || []\n  //     }\n  //   } else {\n  //     utils.forOwn(_schema, function (prop, key) {\n  //       errors = errors.concat(validate.validate(prop, utils.get(obj, key)) || [])\n  //     })\n  //   }\n  //   return errors.length ? errors : undefined\n  // },\n\n  /**\n   * @param {Object} [opts] Configuration options. @see {@link Model.create}.\n   */\n  create (opts) {\n    return this._mapper().create(this, opts)\n  },\n\n  beforeSave () {},\n  save (opts) {\n    let op, adapter\n    const self = this\n    const Mapper = self._mapper()\n\n    // Default values for arguments\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Model's configuration\n    _(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeSave lifecycle hook\n    op = opts.op = 'beforeSave'\n    return resolve(self[op](opts)).then(function () {\n      // Now delegate to the adapter\n      op = opts.op = 'save'\n      Mapper.dbg(op, self, opts)\n      return self.getAdapter(adapter)[op](Mapper, self, opts)\n    }).then(function (data) {\n      // afterSave lifecycle hook\n      op = opts.op = 'afterSave'\n      return resolve(self[op](data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        if (opts.raw) {\n          self.set(data.data)\n          data.data = self\n        } else {\n          self.set(data)\n        }\n        return Mapper.end(data, opts)\n      })\n    })\n  },\n  afterSave () {},\n\n  beforeLoadRelations () {},\n  loadRelations (relations, opts) {\n    let op\n    const self = this\n    const Mapper = self._mapper()\n    const relationList = Mapper.relationList || []\n\n    // Default values for arguments\n    relations || (relations = [])\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Model's configuration\n    _(Mapper, opts)\n    opts.adapter = Mapper.getAdapterName(opts)\n\n    // beforeLoadRelations lifecycle hook\n    op = opts.op = 'beforeLoadRelations'\n    return resolve(self[op](relations, opts)).then(function () {\n      if (isString(relations)) {\n        relations = [relations]\n      }\n      // Now delegate to the adapter\n      op = opts.op = 'loadRelations'\n      Mapper.dbg(op, self, relations, opts)\n      return Promise.all(relationList.map(function (def) {\n        if (isFunction(def.load)) {\n          return def.load(Mapper, def, self, opts)\n        }\n        let task\n        if (def.type === 'hasMany' && def.foreignKey) {\n          // hasMany\n          task = def.getRelation().findAll({\n            [def.foreignKey]: get(self, Mapper.idAttribute)\n          }, opts)\n        } else if (def.foreignKey) {\n          // belongsTo or hasOne\n          const key = get(self, def.foreignKey)\n          if (isSorN(key)) {\n            task = def.getRelation().find(key, opts)\n          }\n        } else if (def.localKeys) {\n          // hasMany\n          task = def.getRelation().findAll({\n            [def.getRelation().idAttribute]: {\n              'in': get(self, def.localKeys)\n            }\n          }, opts)\n        } else if (def.foreignKeys) {\n          // hasMany\n          task = def.getRelation().findAll({\n            [def.getRelation().idAttribute]: {\n              'contains': get(self, Mapper.idAttribute)\n            }\n          }, opts)\n        }\n        if (task) {\n          task = task.then(function (data) {\n            if (opts.raw) {\n              data = data.data\n            }\n            set(self, def.localField, def.type === 'hasOne' ? (data.length ? data[0] : undefined) : data)\n          })\n        }\n        return task\n      }))\n    }).then(function () {\n      // afterLoadRelations lifecycle hook\n      op = opts.op = 'afterLoadRelations'\n      return resolve(self[op](relations, opts)).then(function () {\n        return self\n      })\n    })\n  },\n  afterLoadRelations () {},\n\n  /**\n   * @param {Object} [opts] Configuration options. @see {@link Model.destroy}.\n   */\n  destroy (opts) {\n    // TODO: move actual destroy logic here\n    const Mapper = this._mapper()\n    return Mapper.destroy(get(this, Mapper.idAttribute), opts)\n  },\n\n  // TODO: move logic for single-item async operations onto the instance.\n\n  toJSON (opts) {\n    return this._mapper().toJSON(this, opts)\n  }\n})\n\n/**\n * Allow records to emit events.\n *\n * An record's registered listeners are stored in the record's private data.\n */\neventify(\n  Record.prototype,\n  function () {\n    return this._get('events')\n  },\n  function (value) {\n    this._set('events', value)\n  }\n)","import {\n  copy,\n  fillIn,\n  forOwn,\n  get,\n  isArray,\n  isBoolean,\n  isFunction,\n  isInteger,\n  isNumber,\n  isNull,\n  isObject,\n  isString,\n  isUndefined\n} from './utils'\n\nexport const types = {\n  array: isArray,\n  boolean: isBoolean,\n  integer: isInteger,\n  'null': isNull,\n  number: isNumber,\n  object: isObject,\n  string: isString\n}\n\nexport const typeGroupValidators = {}\nexport const validationKeywords = {}\n\nconst segmentToString = function (segment, prev) {\n  let str = ''\n  if (segment) {\n    if (isNumber(segment)) {\n      str += `[${segment}]`\n    } else if (prev) {\n      str += `.${segment}`\n    } else {\n      str += `${segment}`\n    }\n  }\n  return str\n}\n\nconst makePath = function (opts) {\n  opts || (opts = {})\n  let path = ''\n  const segments = opts.path || []\n  segments.forEach(function (segment) {\n    path += segmentToString(segment, path)\n  })\n  path += segmentToString(opts.prop, path)\n  return path\n}\n\nconst makeError = function (actual, expected, opts) {\n  return {\n    expected,\n    actual: '' + actual,\n    path: makePath(opts)\n  }\n}\n\nconst addError = function (actual, expected, opts, errors) {\n  errors.push(makeError(actual, expected, opts))\n}\n\nconst maxLengthCommon = function (keyword, value, schema, opts) {\n  const max = schema[keyword]\n  if (value.length > max) {\n    return makeError(value.length, `length no more than ${max}`, opts)\n  }\n}\n\nconst minLengthCommon = function (keyword, value, schema, opts) {\n  const min = schema[keyword]\n  if (value.length < min) {\n    return makeError(value.length, `length no less than ${min}`, opts)\n  }\n}\n\nconst validateKeyword = function (op, value, schema, opts) {\n  return !isUndefined(schema[op]) && validationKeywords[op](value, schema, opts)\n}\n\nconst runOps = function (ops, value, schema, opts) {\n  let errors = []\n  ops.forEach(function (op) {\n    errors = errors.concat(validateKeyword(op, value, schema, opts) || [])\n  })\n  return errors.length ? errors : undefined\n}\n\nconst ANY_OPS = ['enum', 'type', 'allOf', 'anyOf', 'oneOf', 'not']\nconst ARRAY_OPS = ['items', 'maxItems', 'minItems', 'uniqueItems']\nconst NUMERIC_OPS = ['multipleOf', 'maximum', 'minimum']\nconst OBJECT_OPS = ['maxProperties', 'minProperties', 'required', 'properties', 'dependencies']\nconst STRING_OPS = ['maxLength', 'minLength', 'pattern']\n\n/**\n * http://json-schema.org/latest/json-schema-validation.html#anchor75\n * @param {*} value\n * @param {Object} [schema]\n * @param {Object} [opts] Configuration options.\n */\nconst validateAny = function (value, schema, opts) {\n  return runOps(ANY_OPS, value, schema, opts)\n}\n\n/**\n * @param {*} value\n * @param {Object} [schema]\n * @param {Object} [opts]\n */\nexport const validate = function (value, schema, opts) {\n  let errors = []\n  opts || (opts = {})\n  let shouldPop\n  let prevProp = opts.prop\n  if (isUndefined(schema)) {\n    return\n  }\n  if (!isObject(schema)) {\n    throw new Error(`Invalid schema at path: \"${opts.path}\"`)\n  }\n  if (isUndefined(opts.path)) {\n    opts.path = []\n  }\n  // Track our location as we recurse\n  if (!isUndefined(opts.prop)) {\n    shouldPop = true\n    opts.path.push(opts.prop)\n    opts.prop = undefined\n  }\n  // Validate against parent schema\n  if (schema['extends']) {\n    // opts.path = path\n    // opts.prop = prop\n    if (isFunction(schema['extends'].validate)) {\n      errors = errors.concat(schema['extends'].validate(value, opts) || [])\n    } else {\n      errors = errors.concat(validate(value, schema['extends'], opts) || [])\n    }\n  }\n  if (isUndefined(value)) {\n    // Check if property is required\n    if (schema.required === true) {\n      addError(value, 'a value', opts, errors)\n    }\n    if (shouldPop) {\n      opts.path.pop()\n      opts.prop = prevProp\n    }\n    return errors.length ? errors : undefined\n  }\n  errors = errors.concat(validateAny(value, schema, opts) || [])\n  if (shouldPop) {\n    opts.path.pop()\n    opts.prop = prevProp\n  }\n  return errors.length ? errors : undefined\n}\n\nfillIn(validationKeywords, {\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor82\n   */\n  allOf (value, schema, opts) {\n    let allErrors = []\n    schema.allOf.forEach(function (_schema) {\n      allErrors = allErrors.concat(validate(value, _schema, opts) || [])\n    })\n    return allErrors.length ? undefined : allErrors\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor85\n   */\n  anyOf (value, schema, opts) {\n    let validated = false\n    let allErrors = []\n    schema.anyOf.forEach(function (_schema) {\n      const errors = validate(value, _schema, opts)\n      if (errors) {\n        allErrors = allErrors.concat(errors)\n      } else {\n        validated = true\n      }\n    })\n    return validated ? undefined : allErrors\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor70\n   */\n  dependencies (value, schema, opts) {\n    // TODO\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor76\n   */\n  enum (value, schema, opts) {\n    const possibleValues = schema['enum']\n    if (possibleValues.indexOf(value) === -1) {\n      return makeError(value, `one of (${possibleValues.join(', ')})`, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor37\n   */\n  items (value, schema, opts) {\n    opts || (opts = {})\n    // TODO: additionalItems\n    let items = schema.items\n    let errors = []\n    const checkingTuple = isArray(items)\n    const length = value.length\n    for (var prop = 0; prop < length; prop++) {\n      if (checkingTuple) {\n        // Validating a tuple, instead of just checking each item against the\n        // same schema\n        items = schema.items[prop]\n      }\n      opts.prop = prop\n      errors = errors.concat(validate(value[prop], items, opts) || [])\n    }\n    return errors.length ? errors : undefined\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor17\n   */\n  maximum (value, schema, opts) {\n    // Must be a number\n    const maximum = schema.maximum\n    // Must be a boolean\n    // Depends on maximum\n    // default: false\n    const exclusiveMaximum = schema.exclusiveMaximum\n    if (typeof value === typeof maximum && (exclusiveMaximum ? maximum < value : maximum <= value)) {\n      // TODO: Account for value of exclusiveMaximum in messaging\n      return makeError(value, `no more than ${maximum}`, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor42\n   */\n  maxItems (value, schema, opts) {\n    return maxLengthCommon('maxItems', value, schema, opts)\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor26\n   */\n  maxLength (value, schema, opts) {\n    return maxLengthCommon('maxLength', value, schema, opts)\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor54\n   */\n  maxProperties (value, schema, opts) {\n    const maxProperties = schema.maxProperties\n    const length = Object.keys(value).length\n    if (length > maxProperties) {\n      return makeError(length, `no more than ${maxProperties} properties`, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor21\n   */\n  minimum (value, schema, opts) {\n    // Must be a number\n    const minimum = schema.minimum\n    // Must be a boolean\n    // Depends on minimum\n    // default: false\n    const exclusiveMinimum = schema.exclusiveMinimum\n    if (typeof value === typeof minimum && (exclusiveMinimum ? minimum > value : minimum >= value)) {\n      // TODO: Account for value of exclusiveMinimum in messaging\n      return makeError(value, `no less than ${minimum}`, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor42\n   */\n  minItems (value, schema, opts) {\n    return minLengthCommon('minItems', value, schema, opts)\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor29\n   */\n  minLength (value, schema, opts) {\n    return minLengthCommon('minLength', value, schema, opts)\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor57\n   */\n  minProperties (value, schema, opts) {\n    const minProperties = schema.minProperties\n    const length = Object.keys(value).length\n    if (length < minProperties) {\n      return makeError(length, `no more than ${minProperties} properties`, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor14\n   */\n  multipleOf (value, schema, opts) {\n    // TODO\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor91\n   */\n  not (value, schema, opts) {\n    if (!validate(value, schema.not, opts)) {\n      // TODO: better messaging\n      return makeError('succeeded', 'should have failed', opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor88\n   */\n  oneOf (value, schema, opts) {\n    let validated = false\n    let allErrors = []\n    schema.oneOf.forEach(function (_schema) {\n      const errors = validate(value, _schema, opts)\n      if (errors) {\n        allErrors = allErrors.concat(errors)\n      } else if (validated) {\n        allErrors = [makeError('valid against more than one', 'valid against only one', opts)]\n        validated = false\n        return false\n      } else {\n        validated = true\n      }\n    })\n    return validated ? undefined : allErrors\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor33\n   */\n  pattern (value, schema, opts) {\n    const pattern = schema.pattern\n    if (isString(value) && !value.match(pattern)) {\n      return makeError(value, pattern, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor64\n   */\n  properties (value, schema, opts) {\n    opts || (opts = {})\n    // Can be a boolean or an object\n    // Technically the default is an \"empty schema\", but here \"true\" is\n    // functionally the same\n    const additionalProperties = isUndefined(schema.additionalProperties) ? true : schema.additionalProperties\n    // \"s\": The property set of the instance to validate.\n    const toValidate = {}\n    // \"p\": The property set from \"properties\".\n    // Default is an object\n    const properties = schema.properties || {}\n    // \"pp\": The property set from \"patternProperties\".\n    // Default is an object\n    const patternProperties = schema.patternProperties || {}\n    let errors = []\n\n    // Collect set \"s\"\n    forOwn(value, function (_value, prop) {\n      toValidate[prop] = undefined\n    })\n    // Remove from \"s\" all elements of \"p\", if any.\n    forOwn(properties || {}, function (_schema, prop) {\n      if (isUndefined(value[prop]) && !isUndefined(_schema['default'])) {\n        value[prop] = copy(_schema['default'])\n      }\n      opts.prop = prop\n      errors = errors.concat(validate(value[prop], _schema, opts) || [])\n      delete toValidate[prop]\n    })\n    // For each regex in \"pp\", remove all elements of \"s\" which this regex\n    // matches.\n    forOwn(patternProperties, function (_schema, pattern) {\n      forOwn(toValidate, function (undef, prop) {\n        if (prop.match(pattern)) {\n          opts.prop = prop\n          errors = errors.concat(validate(value[prop], _schema, opts) || [])\n          delete toValidate[prop]\n        }\n      })\n    })\n    const keys = Object.keys(toValidate)\n    // If \"s\" is not empty, validation fails\n    if (additionalProperties === false) {\n      if (keys.length) {\n        addError(`extra fields: ${keys.join(', ')}`, 'no extra fields', opts, errors)\n      }\n    } else if (isObject(additionalProperties)) {\n      // Otherwise, validate according to provided schema\n      keys.forEach(function (prop) {\n        opts.prop = prop\n        errors = errors.concat(validate(value[prop], additionalProperties, opts) || [])\n      })\n    }\n    return errors.length ? errors : undefined\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor61\n   */\n  required (value, schema, opts) {\n    const required = schema.required\n    let errors = []\n    if (!opts.existingOnly) {\n      required.forEach(function (prop) {\n        if (isUndefined(get(value, prop))) {\n          const prevProp = opts.prop\n          opts.prop = prop\n          addError(undefined, 'a value', opts, errors)\n          opts.prop = prevProp\n        }\n      })\n    }\n    return errors.length ? errors : undefined\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor79\n   */\n  type (value, schema, opts) {\n    let type = schema.type\n    let validType\n    // Can be one of several types\n    if (isString(type)) {\n      type = [type]\n    }\n    // Try to match the value against an expected type\n    type.forEach(function (_type) {\n      // TODO: throw an error if type is not defined\n      if (types[_type](value, schema, opts)) {\n        // Matched a type\n        validType = _type\n        return false\n      }\n    })\n    // Value did not match any expected type\n    if (!validType) {\n      return makeError(value ? typeof value : '' + value, `one of (${type.join(', ')})`, opts)\n    }\n    // Run keyword validators for matched type\n    // http://json-schema.org/latest/json-schema-validation.html#anchor12\n    const validator = typeGroupValidators[validType]\n    if (validator) {\n      return validator(value, schema, opts)\n    }\n  },\n\n  /**\n   * http://json-schema.org/latest/json-schema-validation.html#anchor49\n   */\n  uniqueItems (value, schema, opts) {\n    if (value && value.length && schema.uniqueItems) {\n      const length = value.length\n      let item, i, j\n      // Check n - 1 items\n      for (i = length - 1; i > 0; i--) {\n        item = value[i]\n        // Only compare against unchecked items\n        for (j = i - 1; j >= 0; j--) {\n          // Found a duplicate\n          if (item === value[j]) {\n            return makeError(item, 'no duplicates', opts)\n          }\n        }\n      }\n    }\n  }\n})\n\nfillIn(typeGroupValidators, {\n  array: function (value, schema, opts) {\n    return runOps(ARRAY_OPS, value, schema, opts)\n  },\n\n  integer: function (value, schema, opts) {\n    // Additional validations for numerics are the same\n    return typeGroupValidators.numeric(value, schema, opts)\n  },\n\n  number: function (value, schema, opts) {\n    // Additional validations for numerics are the same\n    return typeGroupValidators.numeric(value, schema, opts)\n  },\n\n  /**\n   * See http://json-schema.org/latest/json-schema-validation.html#anchor13\n   * @param {*} value\n   * @param {Object} [schema]\n   * @param {Object} [opts] Configuration options.\n   */\n  numeric: function (value, schema, opts) {\n    return runOps(NUMERIC_OPS, value, schema, opts)\n  },\n\n  /**\n   * See http://json-schema.org/latest/json-schema-validation.html#anchor53\n   * @param {*} value\n   * @param {Object} [schema]\n   * @param {Object} [opts] Configuration options.\n   */\n  object: function (value, schema, opts) {\n    return runOps(OBJECT_OPS, value, schema, opts)\n  },\n\n  /**\n   * See http://json-schema.org/latest/json-schema-validation.html#anchor25\n   * @param {*} value\n   * @param {Object} [schema]\n   * @param {Object} [opts] Configuration options.\n   */\n  string: function (value, schema, opts) {\n    return runOps(STRING_OPS, value, schema, opts)\n  }\n})\n\n/**\n * js-data's Schema class.\n * @class Schema\n *\n * @param {Object} definition Schema definition according to json-schema.org\n */\nexport function Schema (definition) {\n  // const self = this\n  definition || (definition = {})\n  // TODO: schema validation\n  fillIn(this, definition)\n\n  // TODO: rework this to make sure all possible keywords are converted\n  // if (definition.properties) {\n  //   forOwn(definition.properties, function (_definition, prop) {\n  //     definition.properties[prop] = new Schema(_definition)\n  //   })\n  // }\n}\n\n/**\n * Validate the provided value against this schema.\n *\n * @param {*} value Value to validate.\n * @param {Object} [opts] Configuration options.\n * @return {(array|undefined)} Array of errors or `undefined` if valid.\n */\nSchema.prototype.validate = function (value, opts) {\n  return validate(value, this, opts)\n}\n","import * as utils from './utils'\nimport {\n  belongsTo,\n  configure,\n  hasMany,\n  hasOne,\n  setSchema,\n  registerAdapter\n} from './decorators/index'\nimport Record from './record'\nimport {Schema} from './schema'\n\nconst {\n  resolve\n} = utils\n\nconst notify = function (...args) {\n  const self = this\n  const opts = args.pop()\n  self.dbg(opts.op, ...args)\n  if (opts.notify || (opts.notify === undefined && self.notify)) {\n    setTimeout(() => {\n      self.emit(opts.op, ...args)\n    })\n  }\n}\n\nconst MAPPER_DEFAULTS = {\n  /**\n   * Hash of registered adapters. Don't modify. Use {@link Mapper#registerAdapter}.\n   *\n   * @name Mapper#_adapters\n   * @private\n   */\n  _adapters: {},\n\n  /**\n   * Hash of registered listeners. Don't modify. Use {@link Mapper#on} and\n   * {@link Mapper#off}.\n   *\n   * @name Mapper#_listeners\n   * @private\n   */\n  _listeners: null,\n\n  /**\n   * The name of the registered adapter that this Mapper should used by default.\n   *\n   * @name Mapper#defaultAdapter\n   * @type {string}\n   * @default http\n   */\n  defaultAdapter: 'http',\n\n  /**\n   * Whether to enable debug-level logs.\n   *\n   * @name Mapper#debug\n   * @type {boolean}\n   * @default false\n   */\n  debug: false,\n\n  /**\n   * The field used as the unique identifier on records handled by this Mapper.\n   *\n   * @name Mapper#idAttribute\n   * @type {string}\n   * @default id\n   */\n  idAttribute: 'id',\n\n  /**\n   * Whether this Mapper should emit operational events.\n   *\n   * @name Mapper#notify\n   * @type {boolean}\n   * @default true\n   */\n  notify: true,\n\n  /**\n   * Whether {@link Mapper#create}, {@link Mapper#createMany}, {@link Mapper#save},\n   * {@link Mapper#update}, {@link Mapper#updateAll}, {@link Mapper#updateMany},\n   * {@link Mapper#find}, {@link Mapper#findAll}, {@link Mapper#destroy}, and\n   * {@link Mapper#destroyAll} should return a raw result object that contains\n   * both the instance data returned by the adapter _and_ metadata about the\n   * operation.\n   *\n   * The default is to NOT return the result object, and instead return just the\n   * instance data.\n   *\n   * @name Mapper#raw\n   * @type {boolean}\n   * @default false\n   */\n  raw: false,\n\n  /**\n   * Set the `false` to force the Mapper to work with POJO objects only.\n   *\n   * ```javascript\n   * import {Mapper, Record} from 'js-data'\n   * const UserMapper = new Mapper({ RecordClass: false })\n   * UserMapper.RecordClass // false\n   * const user = UserMapper#createRecord()\n   * user instanceof Record // false\n   * ```\n   *\n   * Set to a custom class to have records wrapped in your custom class.\n   *\n   * ```javascript\n   * import {Mapper, Record} from 'js-data'\n   *  // Custom class\n   * class User {\n   *   constructor (props = {}) {\n   *     for (var key in props) {\n   *       if (props.hasOwnProperty(key)) {\n   *         this[key] = props[key]\n   *       }\n   *     }\n   *   }\n   * }\n   * const UserMapper = new Mapper({ RecordClass: User })\n   * UserMapper.RecordClass // function User() {}\n   * const user = UserMapper#createRecord()\n   * user instanceof Record // false\n   * user instanceof User // true\n   * ```\n   *\n   * Extend the {@link Record} class.\n   *\n   * ```javascript\n   * import {Mapper, Record} from 'js-data'\n   *  // Custom class\n   * class User extends Record {\n   *   constructor () {\n   *     super(props)\n   *   }\n   * }\n   * const UserMapper = new Mapper({ RecordClass: User })\n   * UserMapper.RecordClass // function User() {}\n   * const user = UserMapper#createRecord()\n   * user instanceof Record // true\n   * user instanceof User // true\n   * ```\n   *\n   * @name Mapper#RecordClass\n   * @default {@link Record}\n   */\n  RecordClass: undefined,\n\n  schema: {},\n\n  /**\n   * Whether {@link Mapper#create} and {@link Mapper#createMany} should instead\n   * call {@link Mapper#update} and {@link Mapper#updateMany} if the provided\n   * record(s) already contain a primary key.\n   *\n   * @name Mapper#upsert\n   * @type {boolean}\n   * @default true\n   */\n  upsert: true\n}\n\n/**\n * js-data's Mapper class.\n *\n * @class Mapper\n * @param {Object} [opts] Configuration options.\n */\nexport default function Mapper (opts) {\n  const self = this\n  utils.classCallCheck(self, Mapper)\n\n  opts || (opts = {})\n  utils.fillIn(self, opts)\n  utils.fillIn(self, utils.copy(MAPPER_DEFAULTS))\n\n  if (!(self.schema instanceof Schema)) {\n    self.schema = new Schema(self.schema)\n  }\n\n  if (utils.isUndefined(self.RecordClass)) {\n    self.RecordClass = Record.extend()\n  }\n  if (self.RecordClass) {\n    self.RecordClass.Mapper = self\n  }\n}\n\n/**\n * Instance members\n */\nutils.addHiddenPropsToTarget(Mapper.prototype, {\n  /**\n   * @name Mapper#end\n   * @method\n   */\n  end (data, opts) {\n    const self = this\n    if (opts.raw) {\n      utils._(opts, data)\n    }\n    let _data = opts.raw ? data.data : data\n    if (utils.isArray(_data)) {\n      _data = _data.map(function (item) {\n        return self.createRecord(item)\n      })\n    } else {\n      _data = self.createRecord(_data)\n    }\n    if (opts.raw) {\n      data.data = _data\n    } else {\n      data = _data\n    }\n    if (opts.notify) {\n      setTimeout(function () {\n        self.emit(opts.op, data, opts)\n      })\n    }\n    return data\n  },\n\n  /**\n   * Create an unsaved, uncached instance of this Mapper's\n   * {@link Mapper#RecordClass}.\n   *\n   * Returns `props` if `props` is already an instance of\n   * {@link Mapper#RecordClass}.\n   *\n   * @name Mapper#createRecord\n   * @method\n   * @param {Object} props The initial properties of the new unsaved record.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.noValidate=false] Whether to skip validation on the\n   * initial properties.\n   * @return {Object} The unsaved record.\n   */\n  createRecord (props, opts) {\n    const RecordClass = this.RecordClass\n    // Check to make sure \"props\" is not already an instance of this Mapper.\n    return RecordClass ? (props instanceof RecordClass ? props : new RecordClass(props, opts)) : props\n  },\n\n  /**\n   * Return whether `record` is an instance of this Mappers's RecordClass.\n   *\n   * @name Mapper#is\n   * @method\n   * @param {Object} record The record to check.\n   * @return {boolean} Whether `record` is an instance of this Mappers's\n   * {@ link Mapper#RecordClass}.\n   */\n  is (record) {\n    const RecordClass = this.RecordClass\n    return RecordClass ? record instanceof RecordClass : false\n  },\n\n  /**\n   * Return a plain object representation of the given record.\n   *\n   * @name Mapper#toJSON\n   * @method\n   * @param {Object} record Record from which to create a plain object\n   * representation.\n   * @param {Object} [opts] Configuration options.\n   * @param {string[]} [opts.with] Array of relation names or relation fields\n   * to include in the representation.\n   * @return {Object} Plain object representation of the record.\n   */\n  toJSON (record, opts) {\n    const self = this\n    opts || (opts = {})\n    let json = record\n    if (self.is(record)) {\n      json = utils.copy(record)\n      // The user wants to include relations in the resulting plain object\n      // representation\n      if (self && self.relationList && opts.with) {\n        if (utils.isString(opts.with)) {\n          opts.with = [opts.with]\n        }\n        self.relationList.forEach(def => {\n          let containedName\n          if (opts.with.indexOf(def.relation) !== -1) {\n            containedName = def.relation\n          } else if (opts.with.indexOf(def.localField) !== -1) {\n            containedName = def.localField\n          }\n          if (containedName) {\n            const optsCopy = { with: opts.with.slice() }\n\n            // Prepare to recurse into deeply nested relations\n            optsCopy.with.splice(optsCopy.with.indexOf(containedName), 1)\n            optsCopy.with.forEach((relation, i) => {\n              if (relation && relation.indexOf(containedName) === 0 && relation.length >= containedName.length && relation[containedName.length] === '.') {\n                optsCopy.with[i] = relation.substr(containedName.length + 1)\n              } else {\n                optsCopy.with[i] = ''\n              }\n            })\n            const relationData = utils.get(record, def.localField)\n\n            if (relationData) {\n              // The actual recursion\n              if (utils.isArray(relationData)) {\n                utils.set(json, def.localField, relationData.map(item => def.getRelation().toJSON(item, optsCopy)))\n              } else {\n                utils.set(json, def.localField, def.getRelation().toJSON(relationData, optsCopy))\n              }\n            }\n          }\n        })\n      }\n    }\n    return json\n  },\n\n  /**\n   * Return the registered adapter with the given name or the default adapter if\n   * no name is provided.\n   *\n   * @name Mapper#getAdapter\n   * @method\n   * @param {string} [name]- The name of the adapter to retrieve.\n   * @return {Adapter} The adapter, if any.\n   */\n  getAdapter (name) {\n    const self = this\n    self.dbg('getAdapter', 'name:', name)\n    const adapter = self.getAdapterName(name)\n    if (!adapter) {\n      throw new ReferenceError(`${adapter} not found!`)\n    }\n    return self.getAdapters()[adapter]\n  },\n\n  /**\n   * Return the name of a registered adapter based on the given name or options,\n   * or the name of the default adapter if no name provided.\n   *\n   * @name Mapper#getAdapterName\n   * @method\n   * @param {(Object|string)} [opts] The name of an adapter or options, if any.\n   * @return {string} The name of the adapter.\n   */\n  getAdapterName (opts) {\n    opts || (opts = {})\n    if (utils.isString(opts)) {\n      opts = { adapter: opts }\n    }\n    return opts.adapter || opts.defaultAdapter\n  },\n\n  /**\n   * @name Mapper#getAdapters\n   * @method\n   */\n  getAdapters () {\n    return this._adapters\n  },\n\n  getSchema () {\n    return this.schema\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#create}. If this method\n   * returns a promise then {@link Mapper#create} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeCreate\n   * @method\n   * @param {Object} props The `props` argument passed to {@link Mapper#create}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#create}.\n   */\n  beforeCreate: notify,\n\n  checkUpsertCreate (props, opts) {\n    const self = this\n    return (opts.upsert || (opts.upsert === undefined && self.upsert)) &&\n          utils.get(props, self.idAttribute)\n  },\n\n  /**\n   * Create and save a new the record using the provided `props`.\n   *\n   * {@link Mapper#beforeCreate} will be called before calling the adapter.\n   * {@link Mapper#afterCreate} will be called after calling the adapter.\n   *\n   * @name Mapper#create\n   * @method\n   * @param {Object} props The properties for the new record.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * created data. If `true` return a response object that includes the created\n   * data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to create in a cascading\n   * create if `props` contains nested relations. NOT performed in a transaction.\n   * @return {Promise}\n   */\n  create (props, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    props || (props = {})\n    opts || (opts = {})\n\n    // Check whether we should do an upsert instead\n    if (self.checkUpsertCreate(props, opts)) {\n      return self.update(utils.get(props, self.idAttribute), props, opts)\n    }\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeCreate lifecycle hook\n    op = opts.op = 'beforeCreate'\n    return resolve(self[op](props, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = _props || props\n      // Now delegate to the adapter\n      op = opts.op = 'create'\n      const json = self.toJSON(props, opts)\n      self.dbg(op, json, opts)\n      return resolve(self.getAdapter(adapter)[op](self, json, opts))\n    }).then(function (data) {\n      // afterCreate lifecycle hook\n      op = opts.op = 'afterCreate'\n      return resolve(self[op](data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        // Possibly formulate result object\n        return self.end(data, opts)\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#create}. If this method\n   * returns a promise then {@link Mapper#create} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterCreate\n   * @method\n   * @param {Object} data The `data` return by the adapter.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#create}.\n   */\n  afterCreate: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#createMany}. If this method\n   * returns a promise then {@link Mapper#createMany} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeCreateMany\n   * @method\n   * @param {Array} records The `records` argument passed to {@link Mapper#createMany}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#createMany}.\n   */\n  beforeCreateMany: notify,\n\n  checkUpsertCreateMany (records, opts) {\n    const self = this\n    if (opts.upsert || (opts.upsert === undefined && self.upsert)) {\n      return records.reduce(function (hasId, item) {\n        return hasId && utils.get(item, self.idAttribute)\n      }, true)\n    }\n  },\n\n  /**\n   * Given an array of records, batch create them via an adapter.\n   *\n   * {@link Mapper#beforeCreateMany} will be called before calling the adapter.\n   * {@link Mapper#afterCreateMany} will be called after calling the adapter.\n   *\n   * @name Mapper#createMany\n   * @method\n   * @param {Array} records Array of records to be created in one batch.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * updated data. If `true` return a response object that includes the updated\n   * data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to create in a cascading create\n   * if the records to be created have linked/nested relations. NOT performed\n   * in a transaction.\n   * @return {Promise}\n   */\n  createMany (records, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    records || (records = [])\n    opts || (opts = {})\n\n    // Check whether we should do an upsert instead\n    if (self.checkUpsertCreateMany(records, opts)) {\n      return self.updateMany(records, opts)\n    }\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeCreateMany lifecycle hook\n    op = opts.op = 'beforeCreateMany'\n    return resolve(self[op](records, opts))\n      .then(function (_records) {\n        // Allow for re-assignment from lifecycle hook\n        records = _records || records\n        // Now delegate to the adapter\n        op = opts.op = 'createMany'\n        const json = records.map(function (item) {\n          return self.toJSON(item, opts)\n        })\n        self.dbg(op, json, opts)\n        return resolve(self.getAdapter(adapter)[op](self, json, opts))\n      }).then(function (data) {\n        // afterCreateMany lifecycle hook\n        op = opts.op = 'afterCreateMany'\n        return resolve(self[op](data, opts)).then(function (_data) {\n          // Allow for re-assignment from lifecycle hook\n          data = _data || data\n          // Possibly inject result and/or formulate result object\n          return self.end(data, opts)\n        })\n      })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#createMany}. If this method\n   * returns a promise then {@link Mapper#createMany} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterCreateMany\n   * @method\n   * @param {Array} records The `records` argument passed to {@link Mapper#createMany}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#createMany}.\n   */\n  afterCreateMany: notify,\n\n  /**\n   * Mappers lifecycle hook called by {@link Mapper#find}. If this method\n   * returns a promise then {@link Mapper#find} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeFind\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Mapper#find}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#find}.\n   */\n  beforeFind: notify,\n\n  /**\n   * Retrieve via an adapter the record with the given primary key.\n   *\n   * {@link Mapper#beforeFind} will be called before calling the adapter.\n   * {@link Mapper#afterFind} will be called after calling the adapter.\n   *\n   * @name Mapper#find\n   * @method\n   * @param {(string|number)} id The primary key of the record to retrieve.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * updated data. If `true` return a response object that includes the updated\n   * data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to eager load in the request.\n   * @return {Promise}\n   */\n  find (id, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mappers's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeFind lifecycle hook\n    op = opts.op = 'beforeFind'\n    return resolve(self[op](id, opts)).then(function (_id) {\n      // Allow for re-assignment from lifecycle hook\n      id = _id === undefined ? id : _id\n      // Now delegate to the adapter\n      op = opts.op = 'find'\n      self.dbg(op, id, opts)\n      return resolve(self.getAdapter(adapter)[op](self, id, opts))\n    }).then(function (data) {\n      // afterFind lifecycle hook\n      op = opts.op = 'afterFind'\n      return resolve(self[op](data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        // Possibly inject result and/or formulate result object\n        return self.end(data, opts)\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#find}. If this method\n   * returns a promise then {@link Mapper#find} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterFind\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Mapper#find}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#find}.\n   */\n  afterFind: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#findAll}. If this method\n   * returns a promise then {@link Mapper#findAll} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeFindAll\n   * @method\n   * @param {Object} query The `query` argument passed to {@link Mapper#findAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#findAll}.\n   */\n  beforeFindAll: notify,\n\n  /**\n   * Using the `query` argument, select records to pull from an adapter.\n   * Expects back from the adapter the array of selected records.\n   *\n   * {@link Mapper#beforeFindAll} will be called before calling the adapter.\n   * {@link Mapper#afterFindAll} will be called after calling the adapter.\n   *\n   * @name Mapper#findAll\n   * @method\n   * @param {Object} [query={}] Selection query.\n   * @param {Object} [query.where] Filtering criteria.\n   * @param {number} [query.skip] Number to skip.\n   * @param {number} [query.limit] Number to limit to.\n   * @param {Array} [query.orderBy] Sorting criteria.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * resulting data. If `true` return a response object that includes the\n   * resulting data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to eager load in the request.\n   * @return {Promise}\n   */\n  findAll (query, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    query || (query = {})\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeFindAll lifecycle hook\n    op = opts.op = 'beforeFindAll'\n    return resolve(self[op](query, opts)).then(function (_query) {\n      // Allow for re-assignment from lifecycle hook\n      query = _query || query\n      // Now delegate to the adapter\n      op = opts.op = 'findAll'\n      self.dbg(op, query, opts)\n      return resolve(self.getAdapter(adapter)[op](self, query, opts))\n    }).then(function (data) {\n      // afterFindAll lifecycle hook\n      op = opts.op = 'afterFindAll'\n      return resolve(self[op](data, query, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        // Possibly inject result and/or formulate result object\n        return self.end(data, opts)\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#findAll}. If this method\n   * returns a promise then {@link Mapper#findAll} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterFindAll\n   * @method\n   * @param {Object} data The `data` returned by the adapter.\n   * @param {Object} query The `query` argument passed to {@link Mapper#findAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#findAll}.\n   */\n  afterFindAll: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#update}. If this method\n   * returns a promise then {@link Mapper#update} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeUpdate\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Mapper#update}.\n   * @param {props} props The `props` argument passed to {@link Mapper#update}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#update}.\n   */\n  beforeUpdate: notify,\n\n  /**\n   * Using an adapter, update the record with the primary key specified by the\n   * `id` argument.\n   *\n   * {@link Mapper#beforeUpdate} will be called before updating the record.\n   * {@link Mapper#afterUpdate} will be called after updating the record.\n   *\n   * @name Mapper#update\n   * @method\n   * @param {(string|number)} id The primary key of the record to update.\n   * @param {Object} props The update to apply to the record.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * updated data. If `true` return a response object that includes the updated\n   * data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to update in a cascading\n   * update if `props` contains nested updates to relations. NOT performed in a\n   * transaction.\n   * @return {Promise}\n   */\n  update (id, props, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    props || (props = {})\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeUpdate lifecycle hook\n    op = opts.op = 'beforeUpdate'\n    return resolve(self[op](id, props, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = _props || props\n      // Now delegate to the adapter\n      op = opts.op = 'update'\n      const json = self.toJSON(props, opts)\n      self.dbg(op, id, json, opts)\n      return resolve(self.getAdapter(adapter)[op](self, id, json, opts))\n    }).then(function (data) {\n      // afterUpdate lifecycle hook\n      op = opts.op = 'afterUpdate'\n      return resolve(self[op](id, data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        // Possibly inject result and/or formulate result object\n        return self.end(data, opts)\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#update}. If this method\n   * returns a promise then {@link Mapper#update} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterUpdate\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Mapper#update}.\n   * @param {props} props The `props` argument passed to {@link Mapper#update}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#update}.\n   */\n  afterUpdate: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#updateMany}. If this method\n   * returns a promise then {@link Mapper#updateMany} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeUpdateMany\n   * @method\n   * @param {Array} records The `records` argument passed to {@link Mapper#updateMany}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#updateMany}.\n   */\n  beforeUpdateMany: notify,\n\n  /**\n   * Given an array of updates, perform each of the updates via an adapter. Each\n   * \"update\" is a hash of properties with which to update an record. Each\n   * update must contain the primary key to be updated.\n   *\n   * {@link Mapper#beforeUpdateMany} will be called before making the update.\n   * {@link Mapper#afterUpdateMany} will be called after making the update.\n   *\n   * @name Mapper#updateMany\n   * @method\n   * @param {Array} records Array up record updates.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * updated data. If `true` return a response object that includes the updated\n   * data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to update in a cascading\n   * update if each record update contains nested updates for relations. NOT\n   * performed in a transaction.\n   * @return {Promise}\n   */\n  updateMany (records, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    records || (records = [])\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeUpdateMany lifecycle hook\n    op = opts.op = 'beforeUpdateMany'\n    return resolve(self[op](records, opts)).then(function (_records) {\n      // Allow for re-assignment from lifecycle hook\n      records = _records || records\n      // Now delegate to the adapter\n      op = opts.op = 'updateMany'\n      const json = records.map(function (item) {\n        return self.toJSON(item, opts)\n      })\n      self.dbg(op, json, opts)\n      return resolve(self.getAdapter(adapter)[op](self, json, opts))\n    }).then(function (data) {\n      // afterUpdateMany lifecycle hook\n      op = opts.op = 'afterUpdateMany'\n      return resolve(self[op](data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        // Possibly inject result and/or formulate result object\n        return self.end(data, opts)\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#updateMany}. If this method\n   * returns a promise then {@link Mapper#updateMany} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterUpdateMany\n   * @method\n   * @param {Array} records The `records` argument passed to {@link Mapper#updateMany}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#updateMany}.\n   */\n  afterUpdateMany: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#updateAll}. If this method\n   * returns a promise then {@link Mapper#updateAll} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeUpdateAll\n   * @method\n   * @param {Object} query The `query` argument passed to {@link Mapper#updateAll}.\n   * @param {Object} props The `props` argument passed to {@link Mapper#updateAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#updateAll}.\n   */\n  beforeUpdateAll: notify,\n\n  /**\n   * Using the `query` argument, perform the a single updated to the selected\n   * records. Expects back from the adapter an array of the updated records.\n   *\n   * {@link Mapper#beforeUpdateAll} will be called before making the update.\n   * {@link Mapper#afterUpdateAll} will be called after making the update.\n   *\n   * @name Mapper#updateAll\n   * @method\n   * @param {Object} [query={}] Selection query.\n   * @param {Object} [query.where] Filtering criteria.\n   * @param {number} [query.skip] Number to skip.\n   * @param {number} [query.limit] Number to limit to.\n   * @param {Array} [query.orderBy] Sorting criteria.\n   * @param {Object} props Update to apply to selected records.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * updated data. If `true` return a response object that includes the updated\n   * data and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to update in a cascading\n   * update if `props` contains nested updates to relations. NOT performed in a\n   * transaction.\n   * @return {Promise}\n   */\n  updateAll (query, props, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    query || (query = {})\n    props || (props = {})\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeUpdateAll lifecycle hook\n    op = opts.op = 'beforeUpdateAll'\n    return resolve(self[op](query, props, opts)).then(function (_props) {\n      // Allow for re-assignment from lifecycle hook\n      props = _props || props\n      // Now delegate to the adapter\n      op = opts.op = 'updateAll'\n      const json = self.toJSON(props, opts)\n      self.dbg(op, query, json, opts)\n      return resolve(self.getAdapter(adapter)[op](self, query, json, opts))\n    }).then(function (data) {\n      // afterUpdateAll lifecycle hook\n      op = opts.op = 'afterUpdateAll'\n      return resolve(self[op](query, data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        // Possibly inject result and/or formulate result object\n        return self.end(data, opts)\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#updateAll}. If this method\n   * returns a promise then {@link Mapper#updateAll} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterUpdateAll\n   * @method\n   * @param {Object} query The `query` argument passed to {@link Mapper#updateAll}.\n   * @param {Object} props The `props` argument passed to {@link Mapper#updateAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#updateAll}.\n   */\n  afterUpdateAll: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#destroy}. If this method\n   * returns a promise then {@link Mapper#destroy} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeDestroy\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Mapper#destroy}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#destroy}.\n   */\n  beforeDestroy: notify,\n\n  /**\n   * Using an adapter, destroy the record with the primary key specified by the\n   * `id` argument.\n   *\n   * {@link Mapper#beforeDestroy} will be called before destroying the record.\n   * {@link Mapper#afterDestroy} will be called after destroying the record.\n   *\n   * @name Mapper#destroy\n   * @method\n   * @param {(string|number)} id The primary key of the record to destroy.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * ejected data (if any). If `true` return a response object that includes the\n   * ejected data (if any) and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to destroy in a cascading\n   * delete. NOT performed in a transaction.\n   * @return {Promise}\n   */\n  destroy (id, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeDestroy lifecycle hook\n    op = opts.op = 'beforeDestroy'\n    return resolve(self[op](id, opts)).then(function (_id) {\n      // Allow for re-assignment from lifecycle hook\n      id = _id === undefined ? id : _id\n      // Now delegate to the adapter\n      op = opts.op = 'destroy'\n      self.dbg(op, id, opts)\n      return resolve(self.getAdapter(adapter)[op](self, id, opts))\n    }).then(function (data) {\n      // afterDestroy lifecycle hook\n      op = opts.op = 'afterDestroy'\n      return resolve(self[op](data, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        if (opts.raw) {\n          utils._(opts, data)\n          return data\n        }\n        return data\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#destroy}. If this method\n   * returns a promise then {@link Mapper#destroy} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterDestroy\n   * @method\n   * @param {(string|number)} id The `id` argument passed to {@link Mapper#destroy}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#destroy}.\n   */\n  afterDestroy: notify,\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#destroyAll}. If this method\n   * returns a promise then {@link Mapper#destroyAll} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#beforeDestroyAll\n   * @method\n   * @param {query} query The `query` argument passed to {@link Mapper#destroyAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#destroyAll}.\n   */\n  beforeDestroyAll: notify,\n\n  /**\n   * Using the `query` argument, destroy the selected records via an adapter.\n   * If no `query` is provided then all records will be destroyed.\n   *\n   * {@link Mapper#beforeDestroyAll} will be called before destroying the records.\n   * {@link Mapper#afterDestroyAll} will be called after destroying the records.\n   *\n   * @name Mapper#destroyAll\n   * @method\n   * @param {Object} [query={}] Selection query.\n   * @param {Object} [query.where] Filtering criteria.\n   * @param {number} [query.skip] Number to skip.\n   * @param {number} [query.limit] Number to limit to.\n   * @param {Array} [query.orderBy] Sorting criteria.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.adapter={@link Mapper#defaultAdapter}] Name of the\n   * adapter to use.\n   * @param {boolean} [opts.notify={@link Mapper#notify}] Whether to emit\n   * lifecycle events.\n   * @param {boolean} [opts.raw={@link Mapper#raw}] If `false`, return the\n   * ejected data (if any). If `true` return a response object that includes the\n   * ejected data (if any) and metadata about the operation.\n   * @param {string[]} [opts.with=[]] Relations to destroy in a cascading\n   * delete. NOT performed in a transaction.\n   * @return {Promise}\n   */\n  destroyAll (query, opts) {\n    let op, adapter\n    const self = this\n\n    // Default values for arguments\n    query || (query = {})\n    opts || (opts = {})\n\n    // Fill in \"opts\" with the Mapper's configuration\n    utils._(self, opts)\n    adapter = opts.adapter = self.getAdapterName(opts)\n\n    // beforeDestroyAll lifecycle hook\n    op = opts.op = 'beforeDestroyAll'\n    return resolve(self[op](query, opts)).then(function (_query) {\n      // Allow for re-assignment from lifecycle hook\n      query = _query || query\n      // Now delegate to the adapter\n      op = opts.op = 'destroyAll'\n      self.dbg(op, query, opts)\n      return resolve(self.getAdapter(adapter)[op](self, query, opts))\n    }).then(function (data) {\n      // afterDestroyAll lifecycle hook\n      op = opts.op = 'afterDestroyAll'\n      return resolve(self[op](data, query, opts)).then(function (_data) {\n        // Allow for re-assignment from lifecycle hook\n        data = _data || data\n        if (opts.raw) {\n          utils._(opts, data)\n          return data\n        }\n        return data\n      })\n    })\n  },\n\n  /**\n   * Mapper lifecycle hook called by {@link Mapper#destroyAll}. If this method\n   * returns a promise then {@link Mapper#destroyAll} will wait for the promise\n   * to resolve before continuing.\n   *\n   * @name Mapper#afterDestroyAll\n   * @method\n   * @param {*} data The `data` returned by the adapter.\n   * @param {query} query The `query` argument passed to {@link Mapper#destroyAll}.\n   * @param {Object} opts The `opts` argument passed to {@link Mapper#destroyAll}.\n   */\n  afterDestroyAll: notify,\n\n  /**\n   * @name Mapper#log\n   * @method\n   */\n  log (level, ...args) {\n    if (level && !args.length) {\n      args.push(level)\n      level = 'debug'\n    }\n    if (level === 'debug' && !this.debug) {\n      return\n    }\n    const prefix = `${level.toUpperCase()}: (${this.name})`\n    if (console[level]) {\n      console[level](prefix, ...args)\n    } else {\n      console.log(prefix, ...args)\n    }\n  },\n\n  /**\n   * @name Mapper#dbg\n   * @method\n   */\n  dbg (...args) {\n    this.log('debug', ...args)\n  },\n\n  /**\n   * Usage:\n   *\n   * Post.belongsTo(User, {\n   *   localKey: 'myUserId'\n   * })\n   *\n   * Comment.belongsTo(User)\n   * Comment.belongsTo(Post, {\n   *   localField: '_post'\n   * })\n   *\n   * @name Mapper#belongsTo\n   * @method\n   */\n  belongsTo (RelatedMapper, opts) {\n    return belongsTo(RelatedMapper, opts)(this)\n  },\n\n  /**\n   * Usage:\n   *\n   * User.hasMany(Post, {\n   *   localField: 'my_posts'\n   * })\n   *\n   * @name Mapper#hasMany\n   * @method\n   */\n  hasMany (RelatedMapper, opts) {\n    return hasMany(RelatedMapper, opts)(this)\n  },\n\n  /**\n   * Usage:\n   *\n   * User.hasOne(Profile, {\n   *   localField: '_profile'\n   * })\n   *\n   * @name Mapper#hasOne\n   * @method\n   */\n  hasOne (RelatedMapper, opts) {\n    return hasOne(RelatedMapper, opts)(this)\n  },\n\n  /**\n   * Invoke the {@link module:js-data.exports.setSchema setSchema} decorator on\n   * this Mapper.\n   *\n   * @name Mapper#setSchema\n   * @method\n   * @param {Object} opts Property configurations.\n   * @return {Mapper} A reference to the Mapper for chaining.\n   */\n  setSchema (opts) {\n    return setSchema(opts)(this)\n  },\n\n  /**\n   * Invoke the {@link module:js-data.exports.configure configure} decorator on\n   * this Mapper.\n   *\n   * @name Mapper#configure\n   * @method\n   * @param {Object} opts Configuration\n   * @return {Mapper} A reference to the Mapper for chaining.\n   */\n  configure (opts) {\n    return configure(opts)(this)\n  },\n\n  /**\n   * Invoke the {@link module:js-data.exports.registerAdapter registerAdapter}\n   * decorator on this Mapper.\n   *\n   * @name Mapper#registerAdapter\n   * @method\n   * @param {string} name The name of the adapter to register.\n   * @param {Adapter} adapter The adapter to register.\n   * @param {Object} [opts] Configuration options.\n   * @param {boolean} [opts.default=false] Whether to make the adapter the\n   * default for this Mapper.\n   * @return {Mapper} A reference to the Mapper for chaining.\n   */\n  registerAdapter (name, adapter, opts) {\n    return registerAdapter(name, adapter, opts)(this)\n  }\n})\n\n/**\n * Create a Mapper subclass.\n *\n * @name Mapper.extend\n * @method\n * @param {Object} [props={}] Properties to add to the prototype of the\n * subclass.\n * @param {Object} [classProps={}] Static properties to add to the subclass.\n * @return {Function} Subclass of Mapper.\n */\nMapper.extend = utils.extend\n\n/**\n * Register a new event listener on this Mapper.\n *\n * @name Mapper#on\n * @method\n */\n\n/**\n * Remove an event listener from this Mapper.\n *\n * @name Mapper#off\n * @method\n */\n\n/**\n * Trigger an event on this Mapper.\n *\n * @name Mapper#emit\n * @method\n * @param {string} event Name of event to emit.\n */\n\n/**\n * A Mapper's registered listeners are stored at {@link Mapper#_listeners}.\n */\nutils.eventify(\n  Mapper.prototype,\n  function () {\n    return this._listeners\n  },\n  function (value) {\n    this._listeners = value\n  }\n)\n","import {\n  addHiddenPropsToTarget,\n  classCallCheck,\n  extend,\n  fillIn,\n  forOwn,\n  isObject\n} from './utils'\nimport {\n  registerAdapter\n} from './decorators/index'\nimport Mapper from './mapper'\n\nconst belongsToType = 'belongsTo'\nconst hasManyType = 'hasMany'\nconst hasOneType = 'hasOne'\n\nconst CONTAINER_DEFAULTS = {}\n\n/**\n * TODO\n *\n * @class Container\n * @param {Object} [opts] Configuration options.\n * @return {Container}\n */\nexport default function Container (opts) {\n  const self = this\n  classCallCheck(self, Container)\n\n  opts || (opts = {})\n  fillIn(self, opts)\n  fillIn(self, CONTAINER_DEFAULTS)\n\n  self._adapters = {}\n  self._mappers = {}\n  self.mapperDefaults = self.mapperDefaults || {}\n  self.MapperClass = self.MapperClass || Mapper\n}\n\nContainer.extend = extend\n\naddHiddenPropsToTarget(Container.prototype, {\n  /**\n   * TODO\n   *\n   * @name Container#defineMapper\n   * @method\n   * @param {string} name {@link Mapper#name}.\n   * @param {Object} [opts] Configuration options. Passed to {@link Mapper}.\n   * @return {Mapper}\n   */\n  defineMapper (name, opts) {\n    const self = this\n\n    // For backwards compatibility with defineResource\n    if (isObject(name)) {\n      opts = name\n      if (opts.name) {\n        throw new Error('name is required!');\n      }\n      name = opts.name\n    }\n\n    // Default values for arguments\n    opts || (opts = {})\n    opts.name = name\n    opts.relations || (opts.relations = {})\n\n    // Check if the user is overriding the datastore's default MapperClass\n    const MapperClass = opts.MapperClass || self.MapperClass\n    delete opts.MapperClass\n\n    // Apply the datastore's defaults to the options going into the mapper\n    fillIn(opts, self.mapperDefaults)\n\n    // Instantiate a mapper\n    const mapper = self._mappers[name] = new MapperClass(opts)\n    // Make sure the mapper's name is set\n    mapper.name = name\n    // All mappers in this datastore will share adapters\n    mapper._adapters = self.getAdapters()\n\n    // Setup the mapper's relations, including generating Mapper#relationList\n    // and Mapper#relationFields\n    forOwn(mapper.relations, function (group, type) {\n      forOwn(group, function (relations, _name) {\n        if (isObject(relations)) {\n          relations = [relations]\n        }\n        relations.forEach(function (def) {\n          def.getRelation = function () {\n            return self.getMapper(_name)\n          }\n          const Relation = self._mappers[_name] || _name\n          if (type === belongsToType) {\n            mapper.belongsTo(Relation, def)\n          } else if (type === hasOneType) {\n            mapper.hasOne(Relation, def)\n          } else if (type === hasManyType) {\n            mapper.hasMany(Relation, def)\n          }\n        })\n      })\n    })\n\n    return mapper\n  },\n\n  /**\n   * TODO\n   *\n   * @name Container#getAdapters\n   * @method\n   * @return {Adapter}\n   */\n  getAdapters () {\n    return this._adapters\n  },\n\n  /**\n   * TODO\n   *\n   * @name Container#getMapper\n   * @method\n   * @param {string} name {@link Mapper#name}.\n   * @return {Mapper}\n   */\n  getMapper (name) {\n    const mapper = this._mappers[name]\n    if (!mapper) {\n      throw new ReferenceError(`${name} is not a registered mapper!`)\n    }\n    return mapper\n  },\n\n  /**\n   * TODO\n   *\n   * @name Container#registerAdapter\n   * @method\n   * @param {string} name {@link Mapper#name}.\n   * @param {Adapter} adapter Adapter to register.\n   * @param {Object} [opts] Configuration options.\n   */\n  registerAdapter (name, adapter, opts) {\n    registerAdapter(name, adapter, opts)(this)\n  }\n})\n","import {\n  classCallCheck,\n  extend,\n  get,\n  getSuper,\n  isArray,\n  isObject,\n  set\n} from './utils'\nimport Collection from './collection'\n\nconst belongsToType = 'belongsTo'\nconst hasManyType = 'hasMany'\nconst hasOneType = 'hasOne'\n\n/**\n * TODO\n *\n * @class LinkedCollection\n * @extends Collection\n * @param {Array} [records] Initial set of records to insert into the\n * collection. See {@link Collection}.\n * @param {Object} [opts] Configuration options. See {@link Collection}.\n * @return {Mapper}\n */\nconst LinkedCollection = Collection.extend({\n  constructor (records, opts) {\n    const self = this\n    classCallCheck(self, LinkedCollection)\n\n    getSuper(self).call(self, records, opts)\n\n    // Make sure this collection has somewhere to store \"added\" timestamps\n    self._added = {}\n\n    // Make sure this collection a reference to a datastore\n    if (!self.datastore) {\n      throw new Error('This collection must have a datastore!')\n    }\n    return self\n  },\n\n  add (records, opts) {\n    const self = this\n    const datastore = self.datastore\n    const mapper = self.mapper\n    const relationList = mapper.relationList || []\n    const timestamp = new Date().getTime()\n    let singular\n\n    records = getSuper(self).prototype.add.call(self, records, opts)\n\n    if (isObject(records) && !isArray(records)) {\n      singular = true\n      records = [records]\n    }\n\n    records.forEach(function (record) {\n      // Track when this record was added\n      self._added[self.recordId(record)] = timestamp\n    })\n\n    if (relationList.length && records.length) {\n      // Check the currently visited record for relations that need to be\n      // inserted into their respective collections.\n      mapper.relationList.forEach(function (def) {\n        if (def.add === false) {\n          return\n        }\n        const relationName = def.relation\n        // A reference to the Mapper that this Mapper is related to\n        const Relation = datastore.getMapper(relationName)\n        // The field used by the related Mapper as the primary key\n        const relationIdAttribute = Relation.idAttribute\n        // Grab the foreign key in this relationship, if there is one\n        const foreignKey = def.foreignKey\n        const localField = def.localField\n        // A lot of this is an optimization for being able to insert a lot of\n        // data as quickly as possible\n        const relatedCollection = datastore.getCollection(relationName)\n        const type = def.type\n        const isBelongsTo = type === belongsToType\n        const isHasMany = type === hasManyType\n        const isHasOne = type === hasOneType\n        let relatedData\n\n        records.forEach(function (record) {\n          // Grab a reference to the related data attached or linked to the\n          // currently visited record\n          relatedData = get(record, localField)\n\n          if (relatedData) {\n            const id = get(record, mapper.idAttribute)\n            // Otherwise, if there is something to be added, add it\n            if (isHasMany) {\n              // Handle inserting hasMany relations\n              relatedData = relatedData.map(function (toInsertItem) {\n                // Check that this item isn't the same item that is already in the\n                // store\n                if (toInsertItem !== relatedCollection.get(get(toInsertItem, relationIdAttribute))) {\n                  // Make sure this item has its foreignKey\n                  if (foreignKey) {\n                    set(toInsertItem, foreignKey, id)\n                  }\n                  // Finally add this related item\n                  toInsertItem = relatedCollection.add(relationName, toInsertItem)\n                }\n                return toInsertItem\n              })\n              // If it's the parent that has the localKeys\n              if (def.localKeys) {\n                set(record, def.localKeys, relatedData.map(function (inserted) {\n                  return get(inserted, relationIdAttribute)\n                }))\n              }\n            } else {\n              const relatedDataId = get(relatedData, relationIdAttribute)\n              // Handle inserting belongsTo and hasOne relations\n              if (relatedData !== relatedCollection.get(relatedDataId)) {\n                // Make sure foreignKey field is set\n                if (isBelongsTo) {\n                  set(record, def.foreignKey, relatedDataId)\n                } else if (isHasOne) {\n                  set(relatedData, def.foreignKey, id)\n                }\n                // Finally insert this related item\n                relatedData = relatedCollection.add(relationName, relatedData)\n              }\n            }\n            set(record, localField, relatedData)\n          }\n        })\n      })\n    }\n\n    return singular ? records[0] : records\n  },\n\n  remove (id, opts) {\n    const self = this\n    delete self._added[id]\n    return getSuper(self).prototype.remove.call(self, id, opts)\n  },\n\n  removeAll (query, opts) {\n    const self = this\n    const records = getSuper(self).prototype.removeAll.call(self, query, opts)\n    records.forEach(function (record) {\n      delete self._added[self.recordId(record)]\n    })\n    return records\n  }\n})\n\nLinkedCollection.extend = extend\n\nexport {\n  LinkedCollection as default\n}\n","import {\n  classCallCheck,\n  extend,\n  fillIn,\n  getSuper,\n  isBrowser\n} from './utils'\nimport Container from './container'\nimport LinkedCollection from './linkedcollection'\n\nconst DATASTORE_DEFAULTS = {\n  linkRelations: isBrowser\n}\n\n/**\n * TODO\n *\n * See {@link Container}.\n *\n * @class DataStore\n * @extends Container\n * @param {Object} [opts] Configuration options. See {@link Container}.\n * @return {DataStore}\n */\nconst DataStore = Container.extend({\n  constructor (opts) {\n    const self = this\n    classCallCheck(self, DataStore)\n\n    getSuper(self).call(self, opts)\n    self.CollectionClass = self.CollectionClass || LinkedCollection\n    self._collections = {}\n    fillIn(self, DATASTORE_DEFAULTS)\n    return self\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#_end\n   * @method\n   * @private\n   * @param {string} name Name of the {@link LinkedCollection} to which to\n   * add the data.\n   * @param {Object} data TODO.\n   * @param {Object} [opts] Configuration options.\n   * @return {(Object|Array)} Result.\n   */\n  _end (name, data, opts) {\n    if (opts.raw) {\n      data.data = this.getCollection(name).add(data.data, opts)\n      return data\n    } else {\n      data = this.getCollection(name).add(data, opts)\n    }\n    return data\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#create\n   * @method\n   * @param {string} name Name of the {@link Mapper} to target.\n   * @param {Object} record Passed to {@link Mapper#create}.\n   * @param {Object} [opts] Passed to {@link Mapper#create}. See\n   * {@link Mapper#create} for more configuration options.\n   * @return {Promise}\n   */\n  create (name, record, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).create(record, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#createMany\n   * @method\n   * @param {string} name Name of the {@link Mapper} to target.\n   * @param {Array} records Passed to {@link Mapper#createMany}.\n   * @param {Object} [opts] Passed to {@link Mapper#createMany}. See\n   * {@link Mapper#createMany} for more configuration options.\n   * @return {Promise}\n   */\n  createMany (name, records, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).createMany(records, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  },\n\n  defineMapper (name, opts) {\n    const self = this\n    const mapper = getSuper(self).prototype.defineMapper.call(self, name, opts)\n    mapper.relationList = mapper.relationList || []\n    mapper.relationList.forEach(function (def) {\n      // Conditionally add getters and setters to RecordClass prototype\n    })\n\n    // The datastore uses a subclass of Collection that is \"datastore-aware\"\n    const collection = self._collections[name] = new self.CollectionClass(null, {\n      // Make sure the collection has somewhere to store \"added\" timestamps\n      _added: {},\n      // Give the collection a reference to this datastore\n      datastore: self,\n      // The mapper tied to the collection\n      mapper\n    })\n\n    // Create a secondary index on the \"added\" timestamps of records in the\n    // collection\n    collection.createIndex('addedTimestamps', ['$'], {\n      fieldGetter (obj) {\n        return collection._added[collection.recordId(obj)]\n      }\n    })\n    return mapper\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#destroy\n   * @method\n   * @param {string} name - Name of the {@link Mapper} to target.\n   * @param {(string|number)} id - Passed to {@link Mapper#destroy}.\n   * @param {Object} [opts] - Passed to {@link Mapper#destroy}. See\n   * {@link Mapper#destroy} for more configuration options.\n   * @return {Promise}\n   */\n  destroy (name, id, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).destroy(id, opts).then(function (data) {\n      if (opts.raw) {\n        data.data = self.getCollection(name).remove(id, opts)\n      } else {\n        data = self.getCollection(name).remove(id, opts)\n      }\n      return data\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name Mapper#destroyAll\n   * @method\n   * @param {string} name - Name of the {@link Mapper} to target.\n   * @param {Object} [query] - Passed to {@link Mapper#destroyAll}.\n   * @param {Object} [opts] - Passed to {@link Mapper#destroyAll}. See\n   * {@link Mapper#destroyAll} for more configuration options.\n   * @return {Promise}\n   */\n  destroyAll (name, query, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).destroyAll(query, opts).then(function (data) {\n      if (opts.raw) {\n        data.data = self.getCollection(name).removeAll(query, opts)\n      } else {\n        data = self.getCollection(name).removeAll(query, opts)\n      }\n      return data\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#find\n   * @method\n   * @param {string} name - Name of the {@link Mapper} to target.\n   * @param {(string|number)} id - Passed to {@link Mapper#find}.\n   * @param {Object} [opts] - Passed to {@link Mapper#find}.\n   * @return {Promise}\n   */\n  find (name, id, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).find(id, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#findAll\n   * @method\n   * @param {string} name - Name of the {@link Mapper} to target.\n   * @param {Object} [query] - Passed to {@link Model.findAll}.\n   * @param {Object} [opts] - Passed to {@link Model.findAll}.\n   * @return {Promise}\n   */\n  findAll (name, query, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).findAll(query, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#getCollection\n   * @method\n   * @param {string} name Name of the {@link DataStoreCollection} to retrieve.\n   * @return {DataStoreCollection}\n   */\n  getCollection (name) {\n    const collection = this._collections[name]\n    if (!collection) {\n      throw new ReferenceError(`${name} is not a registered collection!`)\n    }\n    return collection\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#update\n   * @method\n   * @param {string} name - Name of the {@link Mapper} to target.\n   * @param {(string|number)} id - Passed to {@link Mapper#update}.\n   * @param {Object} record - Passed to {@link Mapper#update}.\n   * @param {Object} [opts] - Passed to {@link Mapper#update}. See\n   * {@link Mapper#update} for more configuration options.\n   * @return {Promise}\n   */\n  update (name, id, record, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).update(id, record, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#updateAll\n   * @method\n   * @param {string} name - Name of the {@link Mapper} to target.\n   * @param {Object?} query - Passed to {@link Model.updateAll}.\n   * @param {Object} props - Passed to {@link Model.updateAll}.\n   * @param {Object} [opts] - Passed to {@link Model.updateAll}. See\n   * {@link Model.updateAll} for more configuration options.\n   * @return {Promise}\n   */\n  updateAll (name, query, props, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).updateAll(query, props, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  },\n\n  /**\n   * TODO\n   *\n   * @name DataStore#updateMany\n   * @method\n   * @param {string} name Name of the {@link Mapper} to target.\n   * @param {(Object[]|Record[])} records Passed to {@link Mapper#updateMany}.\n   * @param {Object} [opts] Passed to {@link Mapper#updateMany}. See\n   * {@link Mapper#updateMany} for more configuration options.\n   * @return {Promise}\n   */\n  updateMany (name, records, opts) {\n    const self = this\n    opts || (opts = {})\n    fillIn(opts, self.modelOpts)\n    return self.getMapper(name).updateMany(records, opts).then(function (data) {\n      return self._end(name, data, opts)\n    })\n  }\n})\n\nDataStore.prototype.defineResource = DataStore.prototype.defineMapper\nDataStore.extend = extend\n\nexport {\n  DataStore as default\n}\n","/**\n * Registered as `js-data` in NPM and Bower.\n * #### Script tag\n * ```js\n * window.JSData\n * ```\n * #### CommonJS\n * ```js\n * var JSData = require('js-data')\n * ```\n * #### ES6 Modules\n * ```js\n * import JSData from 'js-data'\n * ```\n * #### AMD\n * ```js\n * define('myApp', ['js-data'], function (JSData) { ... })\n * ```\n *\n * @module js-data\n * @property {Function} belongsTo - {@link module:js-data.exports.belongsTo belongsTo}\n * decorator function.\n * @property {Function} configure - {@link module:js-data.exports.configure configure}\n * decorator function.\n * @property {Function} Collection - {@link Collection} class.\n * @property {Function} DS - {@link DS} class.\n * @property {Function} hasMany - {@link module:js-data.exports.hasMany hasMany}\n * decorator function.\n * @property {Function} hasOne - {@link module:js-data.exports.hasOne hasOne}\n * decorator function.\n * @property {Function} initialize - {@link module:js-data.exports.initialize initialize}\n * decorator function.\n * @property {Function} Model - {@link Model} class.\n * @property {Function} registerAdapter - {@link registerAdapter} decorator\n * function.\n * @property {Function} setSchema - {@link setSchema} decorator function.\n * @property {Function} Query - {@link Query} class.\n * @property {Object} utils - Utility methods used by the `js-data` module. See\n * {@link module:js-data.module:utils utils}.\n * @property {Object} version - Details of the current version of the `js-data`\n * module.\n * @property {string} version.full - The full semver value.\n * @property {number} version.major - The major version number.\n * @property {number} version.minor - The minor version number.\n * @property {number} version.patch - The patch version number.\n * @property {(string|boolean)} version.alpha - The alpha version value,\n * otherwise `false` if the current version is not alpha.\n * @property {(string|boolean)} version.beta - The beta version value,\n * otherwise `false` if the current version is not beta.\n */\n\nconst version = {\n  full: '<%= pkg.version %>',\n  major: parseInt('<%= major %>', 10),\n  minor: parseInt('<%= minor %>', 10),\n  patch: parseInt('<%= patch %>', 10),\n  alpha: '<%= alpha %>' !== 'false' ? '<%= alpha %>' : false,\n  beta: '<%= beta %>' !== 'false' ? '<%= beta %>' : false\n}\n\nimport Collection from './collection'\nimport Container from './container'\nimport DataStore from './datastore'\nimport LinkedCollection from './linkedcollection'\nimport Mapper from './mapper'\nimport Query from './query'\nimport Record from './record'\nimport * as utils from './utils'\n\nexport * from './decorators/index'\nexport * from './schema'\n\nconst DS = DataStore\n\nexport {\n  Collection,\n  Container,\n  DataStore,\n  DS, // Backwards compatiblity\n  LinkedCollection,\n  Mapper,\n  Query,\n  Record,\n  utils,\n  version\n}\n"],"names":["resolve","op","_get","_set","utils.resolve","utils.copy","utils.isUndefined","utils.addHiddenPropsToTarget","utils.isArray","utils.isString","utils.get","_belongsTo","_hasMany","_hasOne","_setSchema","_configure","_registerAdapter","utils.extend","utils.eventify","belongsToType","hasManyType","hasOneType"],"mappings":"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"}